import './polyfills.server.mjs';
import{A as I,B as s,C as a,D as m,E as k,F as f,G as x,H as l,I as b,J as oe,K as vt,L as Zt,M as Qt,N as Kt,O as me,P as X,Q as q,S as Jt,X as ei,Z as ti,_ as bt,a as xt,aa as $,b as qt,ba as Ee,c as $t,ca as W,d as Wt,da as ii,e as Me,ea as ni,f as pe,fa as Y,g as P,ga as ri,h as R,ha as oi,i as J,ia as si,j as z,k as G,l as M,la as ai,m as N,n as B,o as Te,p as h,pa as li,q as g,qa as ci,r as Yt,s as _t,sa as se,t as re,ta as ae,u,ua as Ct,v as y,w as yt,x as H,y as w,z as _}from"./chunk-DCWVAJ3E.mjs";import{b as xi}from"./chunk-KNFSIVWC.mjs";import{c as Si}from"./chunk-B6TGWD6U.mjs";import{b as wi}from"./chunk-MNUGV5G3.mjs";import{b as ui}from"./chunk-SOGTJI5B.mjs";import{b as Mt,c as Tt}from"./chunk-ZRBCXS6J.mjs";import{e as St,f as hi,g as gi,k as bi,p as Ci}from"./chunk-X7WAPDBZ.mjs";import{B as vi,c as wt,d as di,e as ke,f as Ae,i as Pe,j as pi,n as mi,p as fi,w as V,y as _i,z as yi}from"./chunk-BMAIRAQG.mjs";import{a as D,b as U,e as Xt,g as de,h as gt,i as c}from"./chunk-QYG7H2UI.mjs";var hn=Xt(jt=>{"use strict";var pn=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Xr=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,mn=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,qr=/\\([\u000b\u0020-\u00ff])/g,$r=/([\\"])/g,fn=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;jt.format=Wr;jt.parse=Yr;function Wr(n){if(!n||typeof n!="object")throw new TypeError("argument obj is required");var t=n.parameters,e=n.type;if(!e||!fn.test(e))throw new TypeError("invalid type");var i=e;if(t&&typeof t=="object")for(var r,o=Object.keys(t).sort(),d=0;d<o.length;d++){if(r=o[d],!mn.test(r))throw new TypeError("invalid parameter name");i+="; "+r+"="+Qr(t[r])}return i}function Yr(n){if(!n)throw new TypeError("argument string is required");var t=typeof n=="object"?Zr(n):n;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=t.indexOf(";"),i=e!==-1?t.slice(0,e).trim():t.trim();if(!fn.test(i))throw new TypeError("invalid media type");var r=new Kr(i.toLowerCase());if(e!==-1){var o,d,p;for(pn.lastIndex=e;d=pn.exec(t);){if(d.index!==e)throw new TypeError("invalid parameter format");e+=d[0].length,o=d[1].toLowerCase(),p=d[2],p.charCodeAt(0)===34&&(p=p.slice(1,-1),p.indexOf("\\")!==-1&&(p=p.replace(qr,"$1"))),r.parameters[o]=p}if(e!==t.length)throw new TypeError("invalid parameter format")}return r}function Zr(n){var t;if(typeof n.getHeader=="function"?t=n.getHeader("content-type"):typeof n.headers=="object"&&(t=n.headers&&n.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function Qr(n){var t=String(n);if(mn.test(t))return t;if(t.length>0&&!Xr.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace($r,"\\$1")+'"'}function Kr(n){this.parameters=Object.create(null),this.type=n}});var _n=Xt(We=>{"use strict";var Jr=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,gn=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,xn=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;We.format=eo;We.parse=io;We.test=to;function eo(n){if(!n||typeof n!="object")throw new TypeError("argument obj is required");var t=n.subtype,e=n.suffix,i=n.type;if(!i||!gn.test(i))throw new TypeError("invalid type");if(!t||!Jr.test(t))throw new TypeError("invalid subtype");var r=i+"/"+t;if(e){if(!gn.test(e))throw new TypeError("invalid suffix");r+="+"+e}return r}function to(n){if(!n)throw new TypeError("argument string is required");if(typeof n!="string")throw new TypeError("argument string is required to be a string");return xn.test(n.toLowerCase())}function io(n){if(!n)throw new TypeError("argument string is required");if(typeof n!="string")throw new TypeError("argument string is required to be a string");var t=xn.exec(n.toLowerCase());if(!t)throw new TypeError("invalid media type");var e=t[1],i=t[2],r,o=i.lastIndexOf("+");return o!==-1&&(r=i.substr(o+1),i=i.substr(0,o)),new no(e,i,r)}function no(n,t,e){this.type=n,this.subtype=t,this.suffix=e}});var Oi=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(y(yt),y(_t))}}static{this.\u0275dir=B({type:n})}}return n})(),sr=(()=>{class n extends Oi{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yt(n)))(r||n)}})()}static{this.\u0275dir=B({type:n,features:[H]})}}return n})(),It=new J("");var ar={provide:It,useExisting:pe(()=>Q),multi:!0};function lr(){let n=bt()?bt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var cr=new J(""),Q=(()=>{class n extends Oi{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!lr())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(y(yt),y(_t),y(cr,8))}}static{this.\u0275dir=B({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&f("input",function(d){return r._handleInput(d.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(d){return r._compositionEnd(d.target.value)})},features:[me([ar]),H]})}}return n})();function Z(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Vi(n){return n!=null&&typeof n.length=="number"}var Dt=new J(""),Ot=new J(""),ur=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,A=class{static min(t){return dr(t)}static max(t){return pr(t)}static required(t){return mr(t)}static requiredTrue(t){return fr(t)}static email(t){return hr(t)}static minLength(t){return gr(t)}static maxLength(t){return xr(t)}static pattern(t){return _r(t)}static nullValidator(t){return Fi(t)}static compose(t){return ji(t)}static composeAsync(t){return Gi(t)}};function dr(n){return t=>{if(Z(t.value)||Z(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function pr(n){return t=>{if(Z(t.value)||Z(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function mr(n){return Z(n.value)?{required:!0}:null}function fr(n){return n.value===!0?null:{required:!0}}function hr(n){return Z(n.value)||ur.test(n.value)?null:{email:!0}}function gr(n){return t=>Z(t.value)||!Vi(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function xr(n){return t=>Vi(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function _r(n){if(!n)return Fi;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Z(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Fi(n){return null}function Ri(n){return n!=null}function Ni(n){return Jt(n)?qt(n):n}function Bi(n){let t={};return n.forEach(e=>{t=e!=null?D(D({},t),e):t}),Object.keys(t).length===0?null:t}function Li(n,t){return t.map(e=>e(n))}function yr(n){return!n.validate}function Ui(n){return n.map(t=>yr(t)?t:e=>t.validate(e))}function ji(n){if(!n)return null;let t=n.filter(Ri);return t.length==0?null:function(e){return Bi(Li(e,t))}}function zi(n){return n!=null?ji(Ui(n)):null}function Gi(n){if(!n)return null;let t=n.filter(Ri);return t.length==0?null:function(e){let i=Li(e,t).map(Ni);return Wt(i).pipe($t(Bi))}}function Hi(n){return n!=null?Gi(Ui(n)):null}function Mi(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Xi(n){return n._rawValidators}function qi(n){return n._rawAsyncValidators}function Et(n){return n?Array.isArray(n)?n:[n]:[]}function De(n,t){return Array.isArray(n)?n.includes(t):n===t}function Ti(n,t){let e=Et(t);return Et(n).forEach(r=>{De(e,r)||e.push(r)}),e}function Ei(n,t){return Et(t).filter(e=>!De(n,e))}var Oe=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zi(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Hi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ee=class extends Oe{get formDirective(){return null}get path(){return null}},te=class extends Oe{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ve=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},vr={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ws=U(D({},vr),{"[class.ng-submitted]":"isSubmitted"}),ue=(()=>{class n extends Ve{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(y(te,2))}}static{this.\u0275dir=B({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&I("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[H]})}}return n})(),Be=(()=>{class n extends Ve{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(y(ee,10))}}static{this.\u0275dir=B({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&I("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[H]})}}return n})();var fe="VALID",Ie="INVALID",le="PENDING",he="DISABLED";function Vt(n){return(Le(n)?n.validators:n)||null}function br(n){return Array.isArray(n)?zi(n):n||null}function Ft(n,t){return(Le(t)?t.asyncValidators:n)||null}function Cr(n){return Array.isArray(n)?Hi(n):n||null}function Le(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function $i(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Me(1e3,"");if(!i[e])throw new Me(1001,"")}function Wi(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Me(1002,"")})}var ce=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===fe}get invalid(){return this.status===Ie}get pending(){return this.status==le}get disabled(){return this.status===he}get enabled(){return this.status!==he}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ti(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ti(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Ei(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Ei(t,this._rawAsyncValidators))}hasValidator(t){return De(this._rawValidators,t)}hasAsyncValidator(t){return De(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=le,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=he,this.errors=null,this._forEachChild(i=>{i.disable(U(D({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(U(D({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=fe,this._forEachChild(i=>{i.enable(U(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(U(D({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fe||this.status===le)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?he:fe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=le,this._hasOwnPendingAsyncValidator=!0;let e=Ni(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new re,this.statusChanges=new re}_calculateStatus(){return this._allControlsDisabled()?he:this.errors?Ie:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(le)?le:this._anyControlsHaveStatus(Ie)?Ie:fe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Le(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=br(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Cr(this._rawAsyncValidators)}},Fe=class extends ce{constructor(t,e,i){super(Vt(e),Ft(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Wi(this,!0,t),Object.keys(t).forEach(i=>{$i(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var kt=class extends Fe{};var Ue=new J("CallSetDisabledState",{providedIn:"root",factory:()=>je}),je="always";function Yi(n,t){return[...t.path,n]}function At(n,t,e=je){Rt(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Sr(n,t),Tr(n,t),Mr(n,t),wr(n,t)}function ki(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Ne(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Re(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function wr(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Rt(n,t){let e=Xi(n);t.validator!==null?n.setValidators(Mi(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=qi(n);t.asyncValidator!==null?n.setAsyncValidators(Mi(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Re(t._rawValidators,r),Re(t._rawAsyncValidators,r)}function Ne(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=Xi(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(d=>d!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=qi(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(d=>d!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Re(t._rawValidators,i),Re(t._rawAsyncValidators,i),e}function Sr(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Zi(n,t)})}function Mr(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Zi(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Zi(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Tr(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Er(n,t){n==null,Rt(n,t)}function kr(n,t){return Ne(n,t)}function Qi(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Ar(n){return Object.getPrototypeOf(n.constructor)===sr}function Pr(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Ki(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Q?e=o:Ar(o)?i=o:r=o}),r||i||e||null}function Ir(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Ai(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Pi(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ge=class extends ce{constructor(t=null,e,i){super(Vt(e),Ft(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Le(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Pi(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ai(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ai(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Pi(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Dr=n=>n instanceof ge;var Or={provide:te,useExisting:pe(()=>Nt)},Ii=Promise.resolve(),Nt=(()=>{class n extends te{constructor(e,i,r,o,d,p){super(),this._changeDetectorRef=d,this.callSetDisabledState=p,this.control=new ge,this._registered=!1,this.name="",this.update=new re,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ki(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Qi(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){At(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Ii.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&ti(i);Ii.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Yi(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(y(ee,9),y(Dt,10),y(Ot,10),y(It,10),y(ei,8),y(Ue,8))}}static{this.\u0275dir=B({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[G.None,"disabled","isDisabled"],model:[G.None,"ngModel","model"],options:[G.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[me([Or]),H,Te]})}}return n})(),ze=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=B({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var Ji=new J("");var Vr={provide:ee,useExisting:pe(()=>xe)},xe=(()=>{class n extends ee{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new re,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ne(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return At(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){ki(e.control||null,e,!1),Ir(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,Pr(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(ki(i||null,e),Dr(r)&&(At(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Er(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&kr(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rt(this.form,this),this._oldForm&&Ne(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(y(Dt,10),y(Ot,10),y(Ue,8))}}static{this.\u0275dir=B({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&f("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{form:[G.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[me([Vr]),H,Te]})}}return n})();var Fr={provide:te,useExisting:pe(()=>_e)},_e=(()=>{class n extends te{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,o,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new re,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ki(this,o)}ngOnChanges(e){this._added||this._setUpControl(),Qi(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Yi(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(y(ee,13),y(Dt,10),y(Ot,10),y(It,10),y(Ji,8))}}static{this.\u0275dir=B({type:n,selectors:[["","formControlName",""]],inputs:{name:[G.None,"formControlName","name"],isDisabled:[G.None,"disabled","isDisabled"],model:[G.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[me([Fr]),H,Te]})}}return n})();var en=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=R({})}}return n})(),Pt=class extends ce{constructor(t,e,i){super(Vt(e),Ft(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Wi(this,!1,t),t.forEach((i,r)=>{$i(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Di(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ge=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return Di(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Fe(r,o)}record(e,i=null){let r=this._reduceControls(e);return new kt(r,i)}control(e,i,r){let o={};return this.useNonNullable?(Di(i)?o=i:(o.validators=i,o.asyncValidators=r),new ge(e,U(D({},o),{nonNullable:!0}))):new ge(e,i,r)}array(e,i,r){let o=e.map(d=>this._createControl(d));return new Pt(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof ge)return e;if(e instanceof ce)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tn=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ue,useValue:e.callSetDisabledState??je}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=R({imports:[en]})}}return n})(),nn=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ji,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ue,useValue:e.callSetDisabledState??je}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=R({imports:[en]})}}return n})();var He=(()=>{class n{constructor(e){this.http=e,this.songAPI="http://localhost:8088/api/v1/songs"}getAllSongs(){return this.http.get(this.songAPI)}updateSongById(e,i){return this.http.put(`${this.songAPI}/update/${e}`,i)}static{this.\u0275fac=function(i){return new(i||n)(z(Y))}}static{this.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hn=de(wt(),1);var Rr="End-Of-Stream",v=class extends Error{constructor(){super(Rr)}};var ye=class{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}peek(t,e,i){return c(this,null,function*(){let r=yield this.read(t,e,i);return this.peekQueue.push(t.subarray(e,e+r)),r})}read(t,e,i){return c(this,null,function*(){if(i===0)return 0;let r=this.readFromPeekBuffer(t,e,i);if(r+=yield this.readRemainderFromStream(t,e+r,i-r),r===0)throw new v;return r})}readFromPeekBuffer(t,e,i){let r=i,o=0;for(;this.peekQueue.length>0&&r>0;){let d=this.peekQueue.pop();if(!d)throw new Error("peekData should be defined");let p=Math.min(d.length,r);t.set(d.subarray(0,p),e+o),o+=p,r-=p,p<d.length&&this.peekQueue.push(d.subarray(p))}return o}readRemainderFromStream(t,e,i){return c(this,null,function*(){let r=i,o=0;for(;r>0&&!this.endOfStream;){let d=Math.min(r,this.maxStreamReadSize),p=yield this.readFromStream(t,e+o,d);if(p===0)break;o+=p,r-=p}return o})}};var ve=class extends ye{constructor(t){super(),this.reader=t.getReader({mode:"byob"})}readFromStream(t,e,i){return c(this,null,function*(){if(this.endOfStream)throw new v;let r=yield this.reader.read(new Uint8Array(i));return r.done&&(this.endOfStream=r.done),r.value?(t.set(r.value,e),r.value.byteLength):0})}abort(){return this.reader.cancel()}close(){return c(this,null,function*(){yield this.abort(),this.reader.releaseLock()})}};var j=class{constructor(t){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=t?.onClose,t?.abortSignal&&t.abortSignal.addEventListener("abort",()=>{this.abort()})}readToken(i){return c(this,arguments,function*(t,e=this.position){let r=new Uint8Array(t.len);if((yield this.readBuffer(r,{position:e}))<t.len)throw new v;return t.get(r,0)})}peekToken(i){return c(this,arguments,function*(t,e=this.position){let r=new Uint8Array(t.len);if((yield this.peekBuffer(r,{position:e}))<t.len)throw new v;return t.get(r,0)})}readNumber(t){return c(this,null,function*(){if((yield this.readBuffer(this.numBuffer,{length:t.len}))<t.len)throw new v;return t.get(this.numBuffer,0)})}peekNumber(t){return c(this,null,function*(){if((yield this.peekBuffer(this.numBuffer,{length:t.len}))<t.len)throw new v;return t.get(this.numBuffer,0)})}ignore(t){return c(this,null,function*(){if(this.fileInfo.size!==void 0){let e=this.fileInfo.size-this.position;if(t>e)return this.position+=e,e}return this.position+=t,t})}close(){return c(this,null,function*(){yield this.abort(),yield this.onClose?.()})}normalizeOptions(t,e){if(e&&e.position!==void 0&&e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return e?{mayBeLess:e.mayBeLess===!0,offset:e.offset?e.offset:0,length:e.length?e.length:t.length-(e.offset?e.offset:0),position:e.position?e.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}abort(){return Promise.resolve()}};var Br=256e3,Xe=class extends j{constructor(t,e){super(e),this.streamReader=t,this.fileInfo=e?.fileInfo??{}}readBuffer(t,e){return c(this,null,function*(){let i=this.normalizeOptions(t,e),r=i.position-this.position;if(r>0)return yield this.ignore(r),this.readBuffer(t,e);if(r<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(i.length===0)return 0;let o=yield this.streamReader.read(t,i.offset,i.length);if(this.position+=o,(!e||!e.mayBeLess)&&o<i.length)throw new v;return o})}peekBuffer(t,e){return c(this,null,function*(){let i=this.normalizeOptions(t,e),r=0;if(i.position){let o=i.position-this.position;if(o>0){let d=new Uint8Array(i.length+o);return r=yield this.peekBuffer(d,{mayBeLess:i.mayBeLess}),t.set(d.subarray(o),i.offset),r-o}if(o<0)throw new Error("Cannot peek from a negative offset in a stream")}if(i.length>0){try{r=yield this.streamReader.peek(t,i.offset,i.length)}catch(o){if(e?.mayBeLess&&o instanceof v)return 0;throw o}if(!i.mayBeLess&&r<i.length)throw new v}return r})}ignore(t){return c(this,null,function*(){let e=Math.min(Br,t),i=new Uint8Array(e),r=0;for(;r<t;){let o=t-r,d=yield this.readBuffer(i,{length:Math.min(e,o)});if(d<0)return d;r+=d}return r})}abort(){return this.streamReader.abort()}supportsRandomAccess(){return!1}};var qe=class extends j{constructor(t,e){super(e),this.uint8Array=t,this.fileInfo=U(D({},e?.fileInfo??{}),{size:t.length})}readBuffer(t,e){return c(this,null,function*(){if(e?.position){if(e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=e.position}let i=yield this.peekBuffer(t,e);return this.position+=i,i})}peekBuffer(t,e){return c(this,null,function*(){let i=this.normalizeOptions(t,e),r=Math.min(this.uint8Array.length-i.position,i.length);if(!i.mayBeLess&&r<i.length)throw new v;return t.set(this.uint8Array.subarray(i.position,i.position+r),i.offset),r})}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(t){this.position=t}};function Ut(n,t){return new Xe(new ve(n),t)}function on(n,t){return new qe(n,t)}import{open as Ur}from"fs/promises";var be=class n extends j{static fromFile(t){return c(this,null,function*(){let e=yield Ur(t,"r"),i=yield e.stat();return new n(e,{fileInfo:{path:t,size:i.size}})})}constructor(t,e){super(e),this.fileHandle=t,this.fileInfo=e.fileInfo}readBuffer(t,e){return c(this,null,function*(){let i=this.normalizeOptions(t,e);if(this.position=i.position,i.length===0)return 0;let r=yield this.fileHandle.read(t,i.offset,i.length,i.position);if(this.position+=r.bytesRead,r.bytesRead<i.length&&(!e||!e.mayBeLess))throw new v;return r.bytesRead})}peekBuffer(t,e){return c(this,null,function*(){let i=this.normalizeOptions(t,e),r=yield this.fileHandle.read(t,i.offset,i.length,i.position);if(!i.mayBeLess&&r.bytesRead<i.length)throw new v;return r.bytesRead})}close(){return c(this,null,function*(){return yield this.fileHandle.close(),gt(n.prototype,this,"close").call(this)})}setPosition(t){this.position=t}supportsRandomAccess(){return!0}};var jr=be.fromFile;function sn(n){return[...n].map(t=>t.charCodeAt(0))}function an(n,t=0){let e=Number.parseInt(new V(6).get(n,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(e))return!1;let i=8*32;for(let r=t;r<t+148;r++)i+=n[r];for(let r=t+156;r<t+512;r++)i+=n[r];return e===i}var ln={get:(n,t)=>n[t+3]&127|n[t+2]<<7|n[t+1]<<14|n[t]<<21,len:4};var cn=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk"],un=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive"];var dn=4100;function Ce(n){return c(this,null,function*(){return new $e().fromBuffer(n)})}function L(n,t,e){e=D({offset:0},e);for(let[i,r]of t.entries())if(e.mask){if(r!==(e.mask[i]&n[i+e.offset]))return!1}else if(r!==n[i+e.offset])return!1;return!0}var $e=class{constructor(t){this.detectors=t?.customDetectors,this.tokenizerOptions={abortSignal:t?.signal},this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}fromTokenizer(t){return c(this,null,function*(){let e=t.position;for(let i of this.detectors||[]){let r=yield i(t);if(r)return r;if(e!==t.position)return}return this.parse(t)})}fromBuffer(t){return c(this,null,function*(){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``);let e=t instanceof Uint8Array?t:new Uint8Array(t);if(e?.length>1)return this.fromTokenizer(on(e,this.tokenizerOptions))})}fromBlob(t){return c(this,null,function*(){return this.fromStream(t.stream())})}fromStream(t){return c(this,null,function*(){let e=yield Ut(t,this.tokenizerOptions);try{return yield this.fromTokenizer(e)}finally{yield e.close()}})}toDetectionStream(t,e){return c(this,null,function*(){let{sampleSize:i=dn}=e,r,o,d=t.getReader({mode:"byob"});try{let{value:E,done:K}=yield d.read(new Uint8Array(i));if(o=E,!K&&E)try{r=yield this.fromBuffer(E.slice(0,i))}catch(Ht){if(!(Ht instanceof v))throw Ht;r=void 0}o=E}finally{d.releaseLock()}let p=new TransformStream({start(E){return c(this,null,function*(){E.enqueue(o)})},transform(E,K){K.enqueue(E)}}),C=t.pipeThrough(p);return C.fileType=r,C})}check(t,e){return L(this.buffer,t,e)}checkString(t,e){return this.check(sn(t),e)}parse(t){return c(this,null,function*(){if(this.buffer=new Uint8Array(dn),t.fileInfo.size===void 0&&(t.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=t,yield t.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return yield t.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(t);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){yield t.ignore(6);let e=yield t.readToken(ln);return t.position+e>t.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(yield t.ignore(e),this.fromTokenizer(t))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;t.position+30<t.fileInfo.size;){yield t.readBuffer(this.buffer,{length:30});let e=new DataView(this.buffer.buffer),i={compressedSize:e.getUint32(18,!0),uncompressedSize:e.getUint32(22,!0),filenameLength:e.getUint16(26,!0),extraFieldLength:e.getUint16(28,!0)};if(i.filename=yield t.readToken(new V(i.filenameLength,"utf-8")),yield t.ignore(i.extraFieldLength),/classes\d*\.dex/.test(i.filename))return{ext:"apk",mime:"application/vnd.android.package-archive"};if(i.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(i.filename.endsWith(".rels")||i.filename.endsWith(".xml"))switch(i.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(i.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(i.filename.startsWith("3D/")&&i.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(i.filename==="mimetype"&&i.compressedSize===i.uncompressedSize){let r=yield t.readToken(new V(i.compressedSize,"utf-8"));switch(r=r.trim(),r){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(i.compressedSize===0){let r=-1;for(;r<0&&t.position<t.fileInfo.size;)yield t.peekBuffer(this.buffer,{mayBeLess:!0}),r=hi(this.buffer,new Uint8Array([80,75,3,4])),yield t.ignore(r>=0?r:this.buffer.length)}else yield t.ignore(i.compressedSize)}}catch(e){if(!(e instanceof v))throw e}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){yield t.ignore(28);let e=new Uint8Array(8);return yield t.readBuffer(e),L(e,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:L(e,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:L(e,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:L(e,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:L(e,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:L(e,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){let e=new V(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(e){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return e.startsWith("3g")?e.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{yield t.ignore(1350);let e=10*1024*1024,i=new Uint8Array(Math.min(e,t.fileInfo.size));if(yield t.readBuffer(i,{mayBeLess:!0}),gi(i,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(e){if(!(e instanceof v))throw e}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let e=yield this.readTiffHeader(!1);if(e)return e}if(this.check([77,77])){let e=yield this.readTiffHeader(!0);if(e)return e}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){function e(){return c(this,null,function*(){let p=yield t.peekNumber(di),C=128,F=0;for(;!(p&C)&&C!==0;)++F,C>>=1;let E=new Uint8Array(F+1);return yield t.readBuffer(E),E})}function i(){return c(this,null,function*(){let p=yield e(),C=yield e();C[0]^=128>>C.length-1;let F=Math.min(6,C.length),E=new DataView(p.buffer),K=new DataView(C.buffer,C.length-F,F);return{id:St(E),len:St(K)}})}function r(p){return c(this,null,function*(){for(;p>0;){let C=yield i();if(C.id===17026)return(yield t.readToken(new V(C.len))).replaceAll(/\00.*$/g,"");yield t.ignore(C.len),--p}})}let o=yield i();switch(yield r(o.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let e=new V(4,"latin1").get(this.buffer,2);if(e.match("^d*")&&e>=1e3&&e<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return yield t.ignore(8),(yield t.readToken(new V(13,"ascii")))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&[`
`,"\r","	"," ","\0"].some(e=>this.checkString(e,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){yield t.ignore(8);function e(){return c(this,null,function*(){return{length:yield t.readToken(mi),type:yield t.readToken(new V(4,"latin1"))}})}do{let i=yield e();if(i.length<0)return;switch(i.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:yield t.ignore(i.length+4)}}while(t.position+8<t.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){function e(){return c(this,null,function*(){let i=new Uint8Array(16);return yield t.readBuffer(i),{id:i,size:Number(yield t.readToken(fi))}})}for(yield t.ignore(30);t.position+24<t.fileInfo.size;){let i=yield e(),r=i.size-24;if(L(i.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let o=new Uint8Array(16);if(r-=yield t.readBuffer(o),L(o,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(L(o,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}yield t.ignore(r)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(yield t.ignore(20),yield t.readToken(new V(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(yield t.peekBuffer(this.buffer,{length:Math.min(256,t.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let e=new DataView(this.buffer.buffer).getUint32(12,!0);if(e>12&&this.buffer.length>=e+16)try{let i=new TextDecoder().decode(this.buffer.slice(16,e+16));if(JSON.parse(i).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(yield t.peekBuffer(this.buffer,{length:Math.min(512,t.fileInfo.size),mayBeLess:!0}),an(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}})}readTiffTag(t){return c(this,null,function*(){let e=yield this.tokenizer.readToken(t?Ae:ke);switch(this.tokenizer.ignore(10),e){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}})}readTiffIFD(t){return c(this,null,function*(){let e=yield this.tokenizer.readToken(t?Ae:ke);for(let i=0;i<e;++i){let r=yield this.readTiffTag(t);if(r)return r}})}readTiffHeader(t){return c(this,null,function*(){let e=(t?Ae:ke).get(this.buffer,2),i=(t?pi:Pe).get(this.buffer,4);if(e===42){if(i>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(i>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return yield this.tokenizer.ignore(i),(yield this.readTiffIFD(t))??{ext:"tif",mime:"image/tiff"}}if(e===43)return{ext:"tif",mime:"image/tiff"}})}},Gr=new Set(cn),Hr=new Set(un);var Nn=de(hn(),1),Bn=de(_n(),1),Ln=de(wt(),1);var Cn=de(wt(),1);var Ye={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function yn(n){return Ye[n]&&!Ye[n].multiple}function vn(n){return!Ye[n].multiple||Ye[n].unique||!1}var S=(()=>{class n{static toIntOrNull(e){let i=Number.parseInt(e,10);return Number.isNaN(i)?null:i}static normalizeTrack(e){let i=e.toString().split("/");return{no:Number.parseInt(i[0],10)||null,of:Number.parseInt(i[1],10)||null}}constructor(e,i){this.tagTypes=e,this.tagMap=i}mapGenericTag(e,i){e={id:e.id,value:e.value},this.postMap(e,i);let r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,i){}}return n.maxRatingScore=1,n})();var ro={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"},Ze=class extends S{constructor(){super(["ID3v1"],ro)}};var O=class extends S{constructor(t,e){let i={};for(let r of Object.keys(e))i[r.toUpperCase()]=e[r];super(t,i)}getCommonName(t){return this.tagMap[t.toUpperCase()]}};var oo={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"},Qe=class n extends O{static toRating(t){return{source:t.email,rating:t.rating>0?(t.rating-1)/254*S.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],oo)}postMap(t,e){switch(t.id){case"UFID":{let i=t.value;i.owner_identifier==="http://musicbrainz.org"&&(t.id+=`:${i.owner_identifier}`,t.value=bi(i.identifier,"latin1"))}break;case"PRIV":{let i=t.value;switch(i.owner_identifier){case"AverageLevel":case"PeakValue":t.id+=`:${i.owner_identifier}`,t.value=i.data.length===4?Pe.get(i.data,0):null,t.value===null&&e.addWarning("Failed to parse PRIV:PeakValue");break;default:e.addWarning(`Unknown PRIV owner-identifier: ${i.data}`)}}break;case"POPM":t.value=n.toRating(t.value);break;default:break}}};var so={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"},Ke=class n extends S{static toRating(t){return{rating:Number.parseFloat(t+1)/5}}constructor(){super(["asf"],so)}postMap(t){switch(t.id){case"WM/SharedUserRating":{let e=t.id.split(":");t.value=n.toRating(t.value),t.id=e[0];break}}}};var ao={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"},Je=class extends O{constructor(){super(["ID3v2.2"],ao)}};var lo={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"},et=class extends O{constructor(){super(["APEv2"],lo)}};var co={"\xA9nam":"title","\xA9ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","\xA9alb":"album","\xA9day":"date","\xA9cmt":"comment","\xA9com":"comment",trkn:"track",disk:"disk","\xA9gen":"genre",covr:"picture","\xA9wrt":"composer","\xA9lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","\xA9grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","\xA9cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","\xA9too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","\xA9mvn":"movement","\xA9mvi":"movementIndex","\xA9mvc":"movementTotal","\xA9wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},uo="iTunes",we=class extends O{constructor(){super([uo],co)}postMap(t,e){switch(t.id){case"rate":t.value={source:void 0,rating:Number.parseFloat(t.value)/100};break}}};var po={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"},tt=class n extends S{static toRating(t,e,i){return{source:t?t.toLowerCase():void 0,rating:Number.parseFloat(e)/i*S.maxRatingScore}}constructor(){super(["vorbis"],po)}postMap(t){if(t.id==="RATING")t.value=n.toRating(void 0,t.value,100);else if(t.id.indexOf("RATING:")===0){let e=t.id.split(":");t.value=n.toRating(e[1],t.value,1),t.id=e[0]}}};var mo={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"},it=class extends S{constructor(){super(["exif"],mo)}};var fo={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"},nt=class extends O{constructor(){super(["matroska"],fo)}};var ho={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"},rt=class extends S{constructor(){super(["AIFF"],ho)}};var ot=class{constructor(){this.tagMappers={},[new Ze,new Je,new Qe,new we,new we,new tt,new et,new Ke,new it,new nt,new rt].forEach(t=>{this.registerTagMapper(t)})}mapTag(t,e,i){if(this.tagMappers[t])return this.tagMappers[t].mapGenericTag(e,i);throw new vi(`No generic tag mapper defined for tag-format: ${t}`)}registerTagMapper(t){for(let e of t.tagTypes)this.tagMappers[e]=t}};function bn(n){let t=n.split(`
`),e=[],i=/\[(\d{2}):(\d{2})\.(\d{2})\]/;for(let r of t){let o=r.match(i);if(o){let d=Number.parseInt(o[1],10),p=Number.parseInt(o[2],10),C=Number.parseInt(o[3],10),F=(d*60+p)*1e3+C*10,E=r.replace(i,"").trim();e.push({timestamp:F,text:E})}}return{contentType:Mt.lyrics,timeStampFormat:Tt.milliseconds,syncText:e}}var ie=(0,Cn.default)("music-metadata:collector"),go=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"],st=class{constructor(t){this.opts=t,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new ot;let e=1;for(let i of go)this.originPriority[i]=e++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(t){ie(`streamInfo: type=${t.type?xi[t.type]:"?"}, codec=${t.codecName}`),this.format.trackInfo.push(t)}setFormat(t,e){ie(`format: ${t} = ${e}`),this.format[t]=e,this.opts?.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:t,value:e}})}addTag(t,e,i){return c(this,null,function*(){ie(`tag ${t}.${e} = ${i}`),this.native[t]||(this.format.tagTypes.push(t),this.native[t]=[]),this.native[t].push({id:e,value:i}),yield this.toCommon(t,e,i)})}addWarning(t){this.quality.warnings.push({message:t})}postMap(t,e){return c(this,null,function*(){switch(e.id){case"artist":if(this.commonOrigin.artist===this.originPriority[t])return this.postMap("artificial",{id:"artists",value:e.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:e.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(e.value)===-1)){let i=(this.common.artists||[]).concat([e.value]),o={id:"artist",value:xo(i)};this.setGenericTag("artificial",o)}break;case"picture":return this.postFixPicture(e.value).then(i=>{i!==null&&(e.value=i,this.setGenericTag(t,e))});case"totaltracks":this.common.track.of=S.toIntOrNull(e.value);return;case"totaldiscs":this.common.disk.of=S.toIntOrNull(e.value);return;case"movementTotal":this.common.movementIndex.of=S.toIntOrNull(e.value);return;case"track":case"disk":case"movementIndex":{let i=this.common[e.id].of;this.common[e.id]=S.normalizeTrack(e.value),this.common[e.id].of=i??this.common[e.id].of;return}case"bpm":case"year":case"originalyear":e.value=Number.parseInt(e.value,10);break;case"date":{let i=Number.parseInt(e.value.substr(0,4),10);Number.isNaN(i)||(this.common.year=i);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":e.value=typeof e.value=="string"?Number.parseInt(e.value,10):e.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":e.value=Ci(e.value);break;case"replaygain_track_minmax":e.value=e.value.split(",").map(i=>Number.parseInt(i,10));break;case"replaygain_undo":{let i=e.value.split(",").map(r=>Number.parseInt(r,10));e.value={leftChannel:i[0],rightChannel:i[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":e.value=e.value==="1"||e.value===1;break;case"isrc":{let i=this.common[e.id];if(i&&i.indexOf(e.value)!==-1)return;break}case"comment":typeof e.value=="string"&&(e.value={text:e.value}),e.value.descriptor==="iTunPGAP"&&this.setGenericTag(t,{id:"gapless",value:e.value.text==="1"});break;case"lyrics":typeof e.value=="string"&&(e.value=bn(e.value));break;default:}e.value!==null&&this.setGenericTag(t,e)})}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}postFixPicture(t){return c(this,null,function*(){if(t.data&&t.data.length>0){if(!t.format){let e=yield Ce(Uint8Array.from(t.data));if(e)t.format=e.mime;else return null}switch(t.format=t.format.toLocaleLowerCase(),t.format){case"image/jpg":t.format="image/jpeg"}return t}return this.addWarning("Empty picture tag found"),null})}toCommon(t,e,i){return c(this,null,function*(){let r={id:e,value:i},o=this.tagMapper.mapTag(t,r,this);o&&(yield this.postMap(t,o))})}setGenericTag(t,e){ie(`common.${e.id} = ${e.value}`);let i=this.commonOrigin[e.id]||1e3,r=this.originPriority[t];if(yn(e.id))if(r<=i)this.common[e.id]=e.value,this.commonOrigin[e.id]=r;else return ie(`Ignore native tag (singleton): ${t}.${e.id} = ${e.value}`);else if(r===i)!vn(e.id)||this.common[e.id].indexOf(e.value)===-1?this.common[e.id].push(e.value):ie(`Ignore duplicate value: ${t}.${e.id} = ${e.value}`);else if(r<i)this.common[e.id]=[e.value],this.commonOrigin[e.id]=r;else return ie(`Ignore native tag (list): ${t}.${e.id} = ${e.value}`);this.opts?.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:e.id,value:e.value}})}};function xo(n){return n.length>2?`${n.slice(0,n.length-1).join(", ")} & ${n[n.length-1]}`:n.join(" & ")}var wn={parserType:"mpeg",extensions:[".mp2",".mp3",".m2a",".aac","aacp"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-VC2KDVUY.mjs")).MpegParser(n,t,e)})}};var Sn={parserType:"apev2",extensions:[".ape"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-LJV6ZDYK.mjs")).APEv2Parser(n,t,e)})}};var Mn={parserType:"asf",extensions:[".asf"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-J7ZI2NMS.mjs")).AsfParser(n,t,e)})}};var Tn={parserType:"dsdiff",extensions:[".dff"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-HPINYH4V.mjs")).DsdiffParser(n,t,e)})}};var En={parserType:"aiff",extensions:[".aif","aiff","aifc"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-Y5DPDZFT.mjs")).AIFFParser(n,t,e)})}};var kn={parserType:"dsf",extensions:[".dsf"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-7LUASRSQ.mjs")).DsfParser(n,t,e)})}};var An={parserType:"flac",extensions:[".flac"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-F3HF4XEE.mjs")).FlacParser(n,t,e)})}};var Pn={parserType:"matroska",extensions:[".mka",".mkv",".mk3d",".mks","webm"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-OZ4PYLQJ.mjs")).MatroskaParser(n,t,e)})}};var In={parserType:"mp4",extensions:[".mp4",".m4a",".m4b",".m4pa","m4v","m4r","3gp"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-QDZLMRQA.mjs")).MP4Parser(n,t,e)})}};var Dn={parserType:"musepack",extensions:[".mpc"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-IRHGQJFB.mjs")).MusepackParser(n,t,e)})}};var On={parserType:"ogg",extensions:[".ogg",".ogv",".oga",".ogm",".ogx",".opus",".spx"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-JKDHC5YQ.mjs")).OggParser(n,t,e)})}};var Vn={parserType:"wavpack",extensions:[".wv",".wvp"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-6LTPDE5O.mjs")).WavPackParser(n,t,e)})}};var Fn={parserType:"riff",extensions:[".wav","wave",".bwf"],load(n,t,e){return c(this,null,function*(){return new(yield import("./chunk-EBMXFFHH.mjs")).WaveParser(n,t,e)})}};var ne=(0,Ln.default)("music-metadata:parser:factory");function _o(n){let t=Nn.default.parse(n),e=(0,Bn.parse)(t.type);return{type:e.type,subtype:e.subtype,suffix:e.suffix,parameters:t.parameters}}var Se=class{constructor(){this.parsers=[],[An,wn,Sn,In,Pn,Fn,On,Mn,En,Vn,Dn,kn,Tn].forEach(t=>this.registerParser(t))}registerParser(t){this.parsers.push(t)}parse(t,e,i){return c(this,null,function*(){if(t.supportsRandomAccess()?(ne("tokenizer supports random-access, scanning for appending headers"),yield Un(t,i)):ne("tokenizer does not support random-access, cannot scan for appending headers"),!e){let d=new Uint8Array(4100);if(t.fileInfo.mimeType&&(e=this.findLoaderForType(Rn(t.fileInfo.mimeType))),!e&&t.fileInfo.path&&(e=this.findLoaderForExtension(t.fileInfo.path)),!e){ne("Guess parser on content..."),yield t.peekBuffer(d,{mayBeLess:!0});let p=yield Ce(d);if(!p||!p.mime)throw new _i("Failed to determine audio format");if(ne(`Guessed file type is mime=${p.mime}, extension=${p.ext}`),e=this.findLoaderForType(Rn(p.mime)),!e)throw new yi(`Guessed MIME-type not supported: ${p.mime}`)}}ne(`Loading ${e.parserType} parser...`);let r=new st(i),o=yield e.load(r,t,i??{});return ne(`Parser ${e.parserType} loaded`),yield o.parse(),r.toCommonMetadata()})}findLoaderForExtension(t){if(!t)return;let e=yo(t).toLocaleLowerCase()||t;return this.parsers.find(i=>i.extensions.indexOf(e)!==-1)}findLoaderForType(t){return t?this.parsers.find(e=>e.parserType===t):void 0}};function yo(n){let t=n.lastIndexOf(".");return t===-1?"":n.slice(t)}function Rn(n){let t;if(!n)return;try{t=_o(n)}catch{ne(`Invalid HTTP Content-Type header value: ${n}`);return}let e=t.subtype.indexOf("x-")===0?t.subtype.substring(2):t.subtype;switch(t.type){case"audio":switch(e){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"mpeg";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf";case"amr":return"amr"}break;case"video":switch(e){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(e){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}var vo="LYRICS200";function jn(n){return c(this,null,function*(){let t=n.fileInfo.size;if(t>=143){let e=new Uint8Array(15),i=n.position;yield n.readBuffer(e,{position:t-143}),n.setPosition(i);let r=new TextDecoder("latin1").decode(e);if(r.slice(6)===vo)return Number.parseInt(r.slice(0,6),10)+15}return 0})}function zn(e){return c(this,arguments,function*(n,t={}){let i={mimeType:n.type,size:n.size};return n instanceof File&&(i.path=n.name),bo(n.stream(),i,t)})}function bo(i,r){return c(this,arguments,function*(n,t,e={}){let o=ui(n,{fileInfo:typeof t=="string"?{mimeType:t}:t});try{return yield Gn(o,e)}finally{yield o.close()}})}function Gn(n,t){return new Se().parse(n,void 0,t)}function Un(e){return c(this,arguments,function*(n,t={}){let i=n.fileInfo.size;if(yield Si(n)){i-=128;let r=yield jn(n);i-=r}t.apeHeader=yield wi.findApeFooterOffset(n,i)})}var Uc=(0,Hn.default)("music-metadata:parser");import{Buffer as Xn}from"buffer";var qn=(()=>{class n{constructor(){typeof window<"u"&&typeof Xn>"u"&&(window.Buffer=Xn)}extractMetadata(e){return c(this,null,function*(){try{let i=yield zn(e);return new Promise(r=>{let o=new Audio;o.src=URL.createObjectURL(e),o.addEventListener("loadedmetadata",()=>{r({title:i.common.title||"Unknown Title",artist:i.common.artist||"Unknown Artist",album:i.common.album||"Unknown Album",genre:i.common.genre?.[0]||"Unknown Genre",duration:`${o.duration.toFixed(2)} seconds`})})})}catch(i){return console.error("Error reading metadata:",i),null}})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var at=(()=>{class n{constructor(e){this.http=e,this.fileAPI="http://localhost:8088/api/v1/files"}getFile(e){return`${this.fileAPI}/${encodeURIComponent(e)}`}upLoad(e,i){let r=new FormData;return r.append("file",e),r.append("dto",new Blob([JSON.stringify(i)],{type:"application/json"})),this.http.post(`${this.fileAPI}/uploads`,r,{reportProgress:!0,responseType:"json"})}downloadSong(e){debugger;let i=`${this.fileAPI}/download?url=${`${this.fileAPI}/${encodeURIComponent(e.file_name)}`}`;return this.http.get(i,{responseType:"blob"})}static{this.\u0275fac=function(i){return new(i||n)(z(Y))}}static{this.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var lt=(()=>{class n{constructor(e){this.http=e,this.songSource=new xt(null),this.currentSong=this.songSource.asObservable(),this.playlistSource=new xt(null),this.currentPlaylist=this.playlistSource.asObservable(),this.playlistApi="http://localhost:8088/api/v1/playlists",this.fromHome=!1}getAllPlaylists(){return this.http.get(this.playlistApi)}createPlaylist(e){return this.http.post(`${this.playlistApi}/create`,e)}updatePlaylist(e,i){return this.http.put(`${this.playlistApi}/update/${e}`,i)}setNewPlaylistSong(e){this.songSource.next(e)}setNewPlaylist(e){this.playlistSource.next(e)}addSongToPlaylist(e,i){return this.http.post(`${this.playlistApi}/${e}/addSong/${i}`,{})}removeSongFromPlaylist(e,i){return this.http.delete(`${this.playlistApi}/${e}/removeSong/${i}`)}static{this.\u0275fac=function(i){return new(i||n)(z(Y))}}static{this.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ct=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-home-footer"]],decls:4,vars:0,consts:[[1,"footer"],[1,"container","text-center"]],template:function(i,r){i&1&&(s(0,"footer",0)(1,"div",1)(2,"p"),l(3,"\xA9 2025 Music Vibes. Tr\u1EA3i nghi\u1EC7m \xE2m nh\u1EA1c theo c\xE1ch ri\xEAng c\u1EE7a ch\xEDnh m\xECnh."),a()()())},styles:[".footer[_ngcontent-%COMP%]{background-color:#1e3c72;color:#fff;padding:10px 0;text-align:center;width:100%;position:absolute;bottom:0;left:0}"]})}}return n})();var dt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-home-header"]],decls:21,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","custom-header"],[1,"container","d-flex","justify-content-between","align-items-center"],["href","#",1,"navbar-brand","d-flex","align-items-center"],["src","../../../assets/logo.png","alt","Logo",1,"logo"],[1,"app-name"],[1,"navbar-nav"],[1,"nav-item"],["href","/home",1,"nav-link"],["href","/favorite",1,"nav-link"],["href","/playlist",1,"nav-link"],["routerLink","/login",1,"nav-link"],[1,"header-quote"]],template:function(i,r){i&1&&(s(0,"nav",0)(1,"div",1)(2,"a",2),m(3,"img",3),s(4,"span",4),l(5,"Music Vibes"),a()(),s(6,"ul",5)(7,"li",6)(8,"a",7),l(9,"Home"),a()(),s(10,"li",6)(11,"a",8),l(12,"Favorites"),a()(),s(13,"li",6)(14,"a",9),l(15,"Playlist"),a()(),s(16,"li",6)(17,"a",10),l(18,"\u0110\u0103ng xu\u1EA5t"),a()()(),s(19,"span",11),l(20,'"Music Vibes - T\u1EADn h\u01B0\u1EDFng \xE2m nh\u1EA1c m\u1ECDi n\u01A1i"'),a()()())},dependencies:[ae],styles:[".custom-header[_ngcontent-%COMP%]{background-color:#dfefff;padding:15px 0;box-shadow:0 4px 6px #0000001a}.logo[_ngcontent-%COMP%]{height:40px;margin-right:10px}.app-name[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1e3c72}.header-quote[_ngcontent-%COMP%]{font-size:16px;font-style:italic;color:#1e3c72;font-weight:500}.navbar-nav[_ngcontent-%COMP%]{gap:20px}.nav-link[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#1e3c72;transition:all .3s ease;padding:8px 15px;border-radius:5px}.nav-link[_ngcontent-%COMP%]:hover{background-color:#1e3c721a;color:#163b68;transform:scale(1.05);cursor:pointer}"]})}}return n})();var wo=(n,t,e)=>({show:n,success:t,error:e}),So=(n,t)=>({"fa-circle-check":n,"fa-triangle-exclamation":t});function Mo(n,t){n&1&&(s(0,"label",40),m(1,"i",41),l(2," Upload your own "),a())}function To(n,t){if(n&1){let e=k();s(0,"button",61),f("click",function(){h(e);let r=x().$implicit,o=x();return g(o.playSong(r))}),m(1,"i",62),a()}}function Eo(n,t){if(n&1){let e=k();s(0,"button",61),f("click",function(){h(e);let r=x().$implicit,o=x();return g(o.pauseSong(r.id))}),m(1,"i",63),a()}}function ko(n,t){if(n&1&&(s(0,"span"),l(1),a()),n&2){let e=x().index;u(),b(e+1)}}function Ao(n,t){if(n&1){let e=k();s(0,"li")(1,"a",54),f("click",function(){let r=h(e).$implicit,o=x().$implicit,d=x();return g(d.selectPlaylist(r,o))}),l(2),a()()}if(n&2){let e=t.$implicit;u(2),b(e.name)}}function Po(n,t){if(n&1){let e=k();s(0,"tr",42),f("mouseenter",function(){let r=h(e).index,o=x();return g(o.hoveredIndex=r)})("mouseleave",function(){h(e);let r=x();return g(r.hoveredIndex=-1)})("dblclick",function(){let r=h(e).$implicit,o=x();return g(o.playSong(r))}),s(1,"td",43),w(2,To,2,0,"button",44)(3,Eo,2,0,"button",44)(4,ko,2,1,"span",45),a(),s(5,"td"),l(6),a(),s(7,"td"),l(8),a(),s(9,"td"),l(10),a(),s(11,"td"),l(12),a(),s(13,"td"),l(14),a(),s(15,"td")(16,"div",46)(17,"div",47)(18,"button",48),f("click",function(){let r=h(e).$implicit,o=x();return g(o.toggleFavorite(r))}),m(19,"i",49),a(),s(20,"div",50)(21,"button",51),m(22,"i",52),a(),s(23,"ul",53),w(24,Ao,3,1,"li",32),s(25,"a",54),f("click",function(){let r=h(e).$implicit,o=x();return g(o.createPlaylistFromSong(r))}),m(26,"i",55),s(27,"span",56),l(28,"New playlist"),a()()()(),s(29,"button",57),f("click",function(){let r=h(e).$implicit,o=x();return g(o.addToQueue(r))}),m(30,"i",58),a()(),s(31,"div",59)(32,"button",57),f("click",function(){let r=h(e).$implicit,o=x();return g(o.downloadSong(r))}),m(33,"i",60),a()()()()()}if(n&2){let e=t.$implicit,i=t.index,r=x();u(2),_("ngIf",r.hoveredIndex===i&&!r.chkPlaying(e.id)),u(),_("ngIf",r.hoveredIndex===i&&r.chkPlaying(e.id)),u(),_("ngIf",r.hoveredIndex!==i),u(2),b(e.title),u(2),b(e.artist),u(2),b(e.genre),u(2),b(e.album),u(2),b(e.duration),u(5),I("favorited",e.is_favorite),u(5),_("ngForOf",r.playlists)}}function Io(n,t){if(n&1){let e=k();s(0,"li")(1,"div",64)(2,"span",65),l(3),a(),s(4,"button",66),f("click",function(){let r=h(e).index,o=x();return g(o.deleteFromQueue(r))}),m(5,"i",67),a()()()}if(n&2){let e=t.$implicit;u(3),vt("",e.title," - ",e.artist,"")}}function Do(n,t){if(n&1&&(s(0,"li"),l(1),a()),n&2){let e=t.$implicit;u(),vt(" ",e.title," - ",e.artist," ")}}var Gt=(()=>{class n{constructor(e,i,r,o,d,p){this.songService=e,this.mp3MetadataService=i,this.fileService=r,this.route=o,this.playlistService=d,this.router=p,this.queue=[],this.recentlyPlayed=[],this.playlists=[],this.hoveredIndex=-1,this.songs=[],this.isShuffle=!1,this.timesPlayed=0,this.prevSongId=-1,this.currentPlay=new Map,this.currentSong={id:0,title:"",artist:"",album:"",genre:"",duration:"",file_name:"",is_favorite:!1},this.metadata=null,this.progress=0,this.isQueueOpen=!1,this.isRecentOpen=!1,this.isToastVisible=!1,this.toastMessage="",this.toastType="success",this.isReplay=!1,this.isFavoritePage=!1}ngOnInit(){this.songService.getAllSongs().subscribe({next:i=>{debugger;this.songs=i},complete:()=>{debugger;console.log("complete")},error:i=>{debugger;console.log(i)}}),this.playlistService.getAllPlaylists().subscribe({next:i=>{debugger;this.playlists=i},complete:()=>{debugger;console.log("complete")},error:i=>{debugger;console.log(i)}}),this.route.url.subscribe(i=>{this.isFavoritePage=i.some(r=>r.path==="favorite"),this.isFavoritePage&&(this.songs=this.songs.filter(r=>r.is_favorite))}),this.currentSong=this.songs[0];let e=localStorage.getItem("musicQueue");e&&(this.queue=JSON.parse(e))}ngAfterViewInit(){debugger;let e=document.querySelector("audio");e.addEventListener("ended",()=>{this.isReplay?e.play():(this.showToast("Ch\u01B0a h\u1EBFt nh\u1EA1c \u0111\xE2u nghe ti\u1EBFp n\xE8","success",2500),this.playNextSong())})}addToQueue(e){this.queue.push(e),this.showToast("Added to queue","success",2e3),localStorage.setItem("musicQueue",JSON.stringify(this.queue)),this.currentSong||this.playNextSong()}playNextSong(){if(this.queue.length>0){this.recentlyPlayed.push(this.currentSong),this.isShuffle&&this.shuffleQueue();let e=this.queue.shift();this.queue.length===0&&this.showToast("\u0110\u1EEBng \u0111\u1EC3 qu\xE1 tr\xECnh nghe nh\u1EA1c b\u1ECB gi\xE1n \u0111o\u1EA1n, th\xEAm b\xE0i h\xE1t v\xE0o h\xE0ng ch\u1EDD ngay","success",4e3),e&&this.playSong(e),localStorage.setItem("musicQueue",JSON.stringify(this.queue))}else console.log("Queue tr\u1ED1ng, kh\xF4ng c\xF3 b\xE0i h\xE1t ti\u1EBFp theo.")}deleteFromQueue(e){this.queue.splice(e,1),localStorage.setItem("musicQueue",JSON.stringify(this.queue))}hideToast(){this.isToastVisible=!1}showToast(e,i,r){this.toastMessage=e,this.toastType=i,this.isToastVisible=!0,setTimeout(()=>{this.hideToast()},r)}openQueueModal(){this.isQueueOpen||(this.isQueueOpen=!0)}closeQueueModal(){this.isQueueOpen=!1}openRecentModal(){this.isRecentOpen||(this.isRecentOpen=!0)}closeRecentModal(){this.isRecentOpen=!1}nextSong(){let e=this.songs.indexOf(this.currentSong);this.queue.length>0?(this.recentlyPlayed.push(this.currentSong),this.currentSong=this.queue[0],this.playSong(this.currentSong)):e<this.songs.length-1&&(this.recentlyPlayed.push(this.currentSong),this.currentSong=this.songs[e+1],this.playSong(this.currentSong))}prevSong(){let e=this.songs.indexOf(this.currentSong);this.recentlyPlayed.length>0?(this.currentSong=this.recentlyPlayed[0],this.playSong(this.currentSong)):e>=1&&(this.currentSong=this.songs[e-1],this.playSong(this.currentSong))}getNextSong(e){let i=this.songs.indexOf(e),r={id:0,title:"",artist:"",album:"",genre:"",duration:"",file_name:"",is_favorite:!1};return i<this.songs.length-1&&(r=this.songs[i+1]),r}toggleFavorite(e){e.is_favorite=!e.is_favorite;let i={title:e.title,artist:e.artist,album:e.album,genre:e.genre,duration:e.duration,file_name:e.file_name,is_favorite:e.is_favorite};this.songService.updateSongById(e.id,i).subscribe({next:r=>{debugger;console.log(r)},complete:()=>{debugger;e.is_favorite?this.showToast("Song was added to favorite","success",2e3):this.showToast("Song was removed from favorite","success",2e3)},error:r=>{debugger;console.log(r)}})}selectPlaylist(e,i){debugger;this.playlistService.setNewPlaylistSong(i),this.playlistService.setNewPlaylist(e),this.router.navigate(["/playlist"]).then(()=>{window.location.reload()})}playSong(e){debugger;this.currentPlay.set(e.id,!0),this.timesPlayed++,this.prevSongId==-1&&(this.prevSongId=e.id,this.currentSong=e),this.prevSongId!=e.id&&(this.timesPlayed=1,this.currentPlay.set(this.prevSongId,!1),this.prevSongId=e.id,this.currentSong=e);let i=document.querySelector("audio");this.timesPlayed==1&&(i.src=this.fileService.getFile(e.file_name)),i.play(),this.queue.length===0&&(this.queue=this.songs.filter(r=>r.id!==e.id),localStorage.setItem("musicQueue",JSON.stringify(this.queue)))}pauseSong(e){debugger;this.timesPlayed++,this.currentPlay.set(e,!1),document.querySelector("audio").pause()}chkPlaying(e){return this.currentPlay.get(e)}toggleShuffle(){this.isShuffle=!this.isShuffle,this.isShuffle?this.shuffleQueue():this.queue=this.songs.filter(e=>e.id!==this.currentSong.id),localStorage.setItem("musicQueue",JSON.stringify(this.queue))}shuffleQueue(){for(let e=this.queue.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1));[this.queue[e],this.queue[i]]=[this.queue[i],this.queue[e]]}}toggleReplay(){this.isReplay=!this.isReplay}isPlaying(e){return e==null?!1:this.currentPlay.get(e.id)==!0}onUpload(e){return c(this,null,function*(){debugger;if(this.selectedFiles=e.target.files,this.selectedFiles){let i=this.selectedFiles.item(0);if(i){this.currentFile=i,this.metadata=yield this.mp3MetadataService.extractMetadata(i);let r={title:this.metadata.title,artist:this.metadata.artist,album:this.metadata.album,genre:this.metadata.genre,duration:this.metadata.duration,file_name:this.currentFile.name,is_favorite:!1};this.fileService.upLoad(i,r).subscribe({next:o=>{debugger;o.type===ni.UploadProgress&&(this.progress=Math.round(100*o.loaded/o.total));let d=this.songs[this.songs.length-1].id,p=r.duration;p=r.duration.substring(0,p.length-11);let C=parseInt(p),F=Math.floor(C/60),E=C%60;p=F+":"+E;let K={id:d+1,title:r.title,artist:r.artist,album:r.album,genre:r.genre,duration:p,file_name:r.file_name,is_favorite:r.is_favorite};this.songs.push(K)},complete:()=>{debugger;console.log("complete"),this.showToast("Upload successfully, enjoy the music","success",4e3)},error:o=>{debugger;console.log(o),this.showToast("Your file already exists in the system","error",4e3)}})}}})}toggleQueue(){this.isQueueOpen=!this.isQueueOpen}downloadSong(e){this.fileService.downloadSong(e).subscribe({next:i=>{debugger;let r=window.URL.createObjectURL(i),o=document.createElement("a");o.style.display="none",o.href=r,o.download=e.file_name,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(r)},complete:()=>{debugger;console.log("complete"),this.showToast("Download successfully, enjoy the music","success",4e3)},error:i=>{debugger;console.log(i),this.showToast("Download failed","error",4e3)}})}createPlaylistFromSong(e){debugger;this.playlistService.setNewPlaylistSong(e),this.router.navigate(["/playlist"])}static{this.\u0275fac=function(i){return new(i||n)(y(He),y(qn),y(at),y(li),y(lt),y(se))}}static{this.\u0275cmp=M({type:n,selectors:[["app-home"]],decls:86,vars:30,consts:[["audioPlayer",""],[1,"container-fluid","home-container"],[1,"row"],[1,"col-md-8","song-list"],[1,"d-flex","justify-content-between","mb-4"],[1,"section-title"],["for","fileUpload","class","upload-btn",4,"ngIf"],["type","file","id","fileUpload","hidden","","multiple","",3,"change"],[1,"table-container"],[1,"table"],[3,"mouseenter","mouseleave","dblclick",4,"ngFor","ngForOf"],[1,"col-md-4","player"],[1,"player-box"],[1,"album-placeholder"],["src","../../../assets/pic.png","alt","1975 pic"],[1,"queue-info-above"],["controls","","controlsList","nodownload noplaybackrate"],[1,"controls"],[1,"control-btn",3,"click"],[1,"fa-solid","fa-shuffle"],[1,"fa-solid","fa-backward-step"],[1,"control-btn","play-pause-btn",3,"click"],[1,"fa-solid"],[1,"fa-solid","fa-forward-step"],[1,"fa-solid","fa-repeat"],[1,"queue-buttons"],[1,"queue-btn",3,"click"],[1,"fa-solid","fa-music"],[1,"recently-played-btn",3,"click"],[1,"fa-solid","fa-clock-rotate-left"],[1,"modal",3,"click"],[1,"modal-content",3,"click"],[4,"ngFor","ngForOf"],[1,"close-btn",3,"click"],[1,"toast-container"],[1,"toast",3,"ngClass"],[1,"toast-content"],[1,"fa-solid",3,"ngClass"],[1,"toast-close-btn",3,"click"],[1,"fa-solid","fa-xmark"],["for","fileUpload",1,"upload-btn"],[1,"fa-solid","fa-cloud-upload"],[3,"mouseenter","mouseleave","dblclick"],[1,"play-cell"],["class","play-btn",3,"click",4,"ngIf"],[4,"ngIf"],[1,"action-group","d-flex","justify-content-between"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fav-btn",3,"click"],[1,"fa-solid","fa-heart"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"action-btn","dropdown-toggle"],[1,"fa-solid","fa-list-ul"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"fa-solid","fa-plus"],[2,"margin-left","5px"],[1,"action-btn",3,"click"],[1,"fa-solid","fa-clock"],[1,""],[1,"fa-solid","fa-download"],[1,"play-btn",3,"click"],[1,"fa-solid","fa-play"],[1,"fa-solid","fa-pause"],[1,"d-flex","justify-content-between",2,"width","100%"],[1,"song-title"],[1,"delete-btn",3,"click"],[1,"fa-solid","fa-trash"]],template:function(i,r){if(i&1){let o=k();m(0,"app-home-header"),s(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),l(6),a(),w(7,Mo,3,0,"label",6),s(8,"input",7),f("change",function(p){return h(o),g(r.onUpload(p))}),a()(),s(9,"div",8)(10,"table",9)(11,"thead")(12,"tr")(13,"th"),l(14,"#"),a(),s(15,"th"),l(16,"Title"),a(),s(17,"th"),l(18,"Artist"),a(),s(19,"th"),l(20,"Genre"),a(),s(21,"th"),l(22,"Album"),a(),s(23,"th"),l(24,"Duration"),a(),s(25,"th"),l(26,"Features"),a()()(),s(27,"tbody"),w(28,Po,34,11,"tr",10),a()()()(),s(29,"div",11)(30,"div",12)(31,"div",13),m(32,"img",14),a(),s(33,"h3"),l(34),a(),s(35,"p"),l(36),a(),s(37,"p",15),l(38," Next in queue: "),s(39,"b"),l(40),a()(),m(41,"audio",16,0),s(43,"div",17)(44,"button",18),f("click",function(){return h(o),g(r.toggleShuffle())}),m(45,"i",19),a(),s(46,"button",18),f("click",function(){return h(o),g(r.prevSong())}),m(47,"i",20),a(),s(48,"button",21),f("click",function(){return h(o),g(r.isPlaying(r.currentSong)?r.pauseSong(r.currentSong.id):r.playSong(r.currentSong))}),m(49,"i",22),a(),s(50,"button",18),f("click",function(){return h(o),g(r.nextSong())}),m(51,"i",23),a(),s(52,"button",18),f("click",function(){return h(o),g(r.toggleReplay())}),m(53,"i",24),a()()(),s(54,"div",25)(55,"button",26),f("click",function(){return h(o),g(r.openQueueModal())}),m(56,"i",27),l(57," Queue "),a(),s(58,"button",28),f("click",function(){return h(o),g(r.openRecentModal())}),m(59,"i",29),l(60," Recently Played "),a()(),s(61,"div",30),f("click",function(){return h(o),g(r.closeQueueModal())}),s(62,"div",31),f("click",function(p){return h(o),g(p.stopPropagation())}),s(63,"h2"),l(64,"Now In Queue"),a(),s(65,"ul"),w(66,Io,6,2,"li",32),a(),s(67,"button",33),f("click",function(){return h(o),g(r.closeQueueModal())}),l(68," \u0110\xF3ng "),a()()(),s(69,"div",30),f("click",function(){return h(o),g(r.closeRecentModal())}),s(70,"div",31),f("click",function(p){return h(o),g(p.stopPropagation())}),s(71,"h2"),l(72,"Recently Played"),a(),s(73,"ul"),w(74,Do,2,2,"li",32),a(),s(75,"button",33),f("click",function(){return h(o),g(r.closeRecentModal())}),l(76," \u0110\xF3ng "),a()()()()()(),s(77,"div",34)(78,"div",35)(79,"div",36),m(80,"i",37),s(81,"span"),l(82),a()(),s(83,"button",38),f("click",function(){return h(o),g(r.hideToast())}),m(84,"i",39),a()()(),m(85,"app-home-footer")}i&2&&(u(6),oe(" ",r.isFavoritePage?"\u{1F3B5} All Favorite Songs":"\u{1F3B5} All Songs"," "),u(),_("ngIf",!r.isFavoritePage),u(21),_("ngForOf",r.songs),u(6),b(r.currentSong?r.currentSong.title:"Unknow title"),u(2),b(r.currentSong?r.currentSong.artist:"Unknow artist "),u(4),b(r.queue.length>0?r.queue[0].title:r.getNextSong(r.currentSong).title),u(5),I("shuffle",r.isShuffle),u(4),I("fa-play",!r.isPlaying(r.currentSong))("fa-pause",r.isPlaying(r.currentSong)),u(4),I("replay",r.isReplay),u(8),I("show",r.isQueueOpen),u(5),_("ngForOf",r.queue),u(3),I("show",r.isRecentOpen),u(5),_("ngForOf",r.recentlyPlayed),u(4),_("ngClass",q(23,wo,r.isToastVisible,r.toastType==="success",r.toastType==="error")),u(2),_("ngClass",X(27,So,r.toastType==="success",r.toastType==="error")),u(2),b(r.toastMessage))},dependencies:[$,Ee,W,ct,dt],styles:["audio[_ngcontent-%COMP%]::-webkit-media-controls-play-button, audio[_ngcontent-%COMP%]::-webkit-media-controls-play-volume{display:none}audio[_ngcontent-%COMP%]::-webkit-media-controls-enclosure{box-shadow:none!important;background-color:transparent!important}.container-fluid[_ngcontent-%COMP%]{background-color:#dfefff;min-height:calc(100vh - 120px)}.home-container[_ngcontent-%COMP%]{padding:20px}.section-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:15px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:10px;box-shadow:0 4px 10px #0000001a}.table[_ngcontent-%COMP%]{width:100%;cursor:pointer}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#c7d4dd!important;cursor:pointer}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{color:#fff;font-weight:700}tr[_ngcontent-%COMP%]{border-top:10px solid transparent;border-bottom:10px solid transparent}tr[_ngcontent-%COMP%]:last-child{border-top:10px solid transparent;border-bottom:0 solid transparent}.fav-btn[_ngcontent-%COMP%]:focus, .fav-btn[_ngcontent-%COMP%]:active{background:none!important;outline:none!important;box-shadow:none!important}.fav-btn[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:#bbb;font-size:18px;transition:color .3s ease}.fav-btn[_ngcontent-%COMP%]   .fa-heart.favorited[_ngcontent-%COMP%]{color:#1e3c72}.dropdown-menu[_ngcontent-%COMP%]{min-width:200px}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.action-group[_ngcontent-%COMP%]{gap:10px}.fav-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;transition:color .3s ease}.action-btn[_ngcontent-%COMP%]:hover, .fav-btn[_ngcontent-%COMP%]:hover{color:#1e3c72}.album-art[_ngcontent-%COMP%]{width:100%;max-width:200px;border-radius:10px;margin-bottom:10px}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.play-cell[_ngcontent-%COMP%]{width:40px;text-align:center}.play-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:16px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#1e3c72;transition:color .3s ease}.play-btn[_ngcontent-%COMP%]:hover{color:#163b68}.player[_ngcontent-%COMP%]{background:#dfefff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 10px #0000001a}.player-box[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.album-art[_ngcontent-%COMP%]{width:100%;max-width:200px;border-radius:10px;margin-bottom:10px;box-shadow:0 4px 6px #0003}.player-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:45px;font-weight:700;color:#1e3c72}.player-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:15px}audio[_ngcontent-%COMP%]{width:100%;margin-top:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#1e3c72;border:none;font-size:16px;padding:8px 15px;transition:background-color .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#163b68}.btn-light[_ngcontent-%COMP%]{border:none;font-size:14px;padding:8px 12px;transition:transform .2s ease}.btn-light[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#e3e3e3}.player-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#1e3c72;font-weight:700}.controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px;margin-top:10px}.control-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#bbb;cursor:pointer;transition:color .3s ease,opacity .2s ease,transform .2s ease}.control-btn[_ngcontent-%COMP%]:hover{opacity:1.1;transform:scale(1.05)}.album-placeholder[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;background-color:#e0e0e0;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 6px #0003;margin:0 auto}.album-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:80px;color:#4a4a4a}.control-btn[_ngcontent-%COMP%]   .fa-shuffle.shuffle[_ngcontent-%COMP%], .control-btn[_ngcontent-%COMP%]   .fa-repeat.replay[_ngcontent-%COMP%]{color:#1e3c72}.upload-btn[_ngcontent-%COMP%]{background-color:#1e3c72;color:#fff;padding:10px 20px;font-size:16px;font-weight:700;border-radius:25px;display:flex;align-items:center;gap:10px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.upload-btn[_ngcontent-%COMP%]:hover{background-color:#163b68;transform:scale(1.05)}.upload-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.queue-btn[_ngcontent-%COMP%], .recently-played-btn[_ngcontent-%COMP%]{background:#1e3c72;color:#fff;padding:8px 15px;font-size:14px;border-radius:20px;border:none;cursor:pointer;transition:background-color .3s ease}.queue-btn[_ngcontent-%COMP%]:hover, .recently-played-btn[_ngcontent-%COMP%]:hover{background:#163b68}.modal[_ngcontent-%COMP%]{display:flex;position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s ease-in-out,visibility .3s ease-in-out}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:scale(1)}.modal-content[_ngcontent-%COMP%]{background:#dfefff;padding:20px;border-radius:10px;width:500px;max-height:70%;overflow-y:auto;box-shadow:0 4px 8px #0003;text-align:center;transform:scale(.95);transition:transform .3s ease-in-out}.modal.show[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{transform:translateY(0)}.close-btn[_ngcontent-%COMP%]{background:#1e3c72;color:#fff;padding:8px 15px;border-radius:5px;border:none;cursor:pointer;margin-top:10px;transition:background-color .3s ease,transform .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#163b68;transform:scale(1.05);cursor:pointer}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;width:100%}.modal-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:12px 15px;border-bottom:1px solid #ddd;transition:background .3s ease}.song-title[_ngcontent-%COMP%]{flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.delete-btn[_ngcontent-%COMP%]{margin-left:15px;background:none;border:none;color:#ff4d4d;font-size:18px;cursor:pointer;transition:color .3s ease,transform .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{color:#c00;transform:scale(1.2)}.toast-container[_ngcontent-%COMP%]{position:fixed;top:15px;right:15px;z-index:1050;display:flex;flex-direction:column;align-items:flex-end}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:6px;box-shadow:0 2px 4px #0003;transform:translate(100%);opacity:0;transition:transform .3s ease-out,opacity .3s ease-out;min-width:200px;max-width:280px;font-size:14px;gap:10px}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.hide[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.toast.success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.toast.error[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.toast[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toast[_ngcontent-%COMP%]   .toast-close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:16px;cursor:pointer;transition:color .3s ease;display:flex;align-items:center;justify-content:center}.toast[_ngcontent-%COMP%]   .toast-close-btn[_ngcontent-%COMP%]:hover{color:#f8d7da}.toast[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.album-placeholder[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#e0e0e0;box-shadow:0 4px 8px #0003;margin:0 auto}.album-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:10px}.queue-info-above[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#666;margin-bottom:10px}.queue-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-top:20px}"]})}}return n})();var pt=(()=>{class n{constructor(e){this.http=e,this.apiRegister="http://localhost:8088/api/v1/users/register",this.apiLogin="http://localhost:8088/api/v1/users/login",this.apiConfig={headers:this.createHeader()}}createHeader(){return new ii({"Content-Type":"application/json","Accept-Language":"vi"})}register(e){return this.http.post(this.apiRegister,e,this.apiConfig)}login(e){return this.http.post(this.apiLogin,e,this.apiConfig)}static{this.\u0275fac=function(i){return new(i||n)(z(Y))}}static{this.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-login-header"]],decls:8,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","custom-header"],[1,"container","d-flex","justify-content-between","align-items-center"],["href","#",1,"navbar-brand","d-flex","align-items-center"],["src","../../../assets/logo.png","alt","Logo",1,"logo"],[1,"app-name"],[1,"header-quote"]],template:function(i,r){i&1&&(s(0,"nav",0)(1,"div",1)(2,"a",2),m(3,"img",3),s(4,"span",4),l(5,"Music Vibes"),a()(),s(6,"span",5),l(7,'"Music Vibes - T\u1EADn h\u01B0\u1EDFng \xE2m nh\u1EA1c m\u1ECDi n\u01A1i"'),a()()())},styles:[".custom-header[_ngcontent-%COMP%]{background-color:#dfefff;padding:15px 0;box-shadow:0 4px 6px #0000001a}.logo[_ngcontent-%COMP%]{height:40px;margin-right:10px}.app-name[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1e3c72}.header-quote[_ngcontent-%COMP%]{font-size:16px;font-style:italic;color:#1e3c72;font-weight:500}"]})}}return n})();var ft=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-login-footer"]],decls:4,vars:0,consts:[[1,"footer"],[1,"container","text-center"]],template:function(i,r){i&1&&(s(0,"footer",0)(1,"div",1)(2,"p"),l(3,"\xA9 2025 Music Vibes. Tr\u1EA3i nghi\u1EC7m \xE2m nh\u1EA1c theo c\xE1ch ri\xEAng c\u1EE7a ch\xEDnh m\xECnh."),a()()())},styles:[".footer[_ngcontent-%COMP%]{background-color:#1e3c72;color:#fff;padding:10px 0;text-align:center;width:100%;position:absolute;bottom:0;left:0}"]})}}return n})();var Oo=(n,t,e)=>({show:n,success:t,error:e}),Vo=(n,t)=>({"fa-circle-check":n,"fa-triangle-exclamation":t});function Fo(n,t){n&1&&(s(0,"div",23),l(1," Email kh\xF4ng h\u1EE3p l\u1EC7! "),a())}function Ro(n,t){n&1&&(s(0,"div",23),l(1," M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1! "),a())}function No(n,t){if(n&1&&(s(0,"div"),w(1,Ro,2,0,"div",6),a()),n&2){let e=x();u(),_("ngIf",e.f.password.errors.minlength)}}var er=(()=>{class n{constructor(e,i,r){this.fb=e,this.userService=i,this.router=r,this.submitted=!1,this.showPassword=!1,this.toastMessage="",this.isToastVisible=!1,this.toastType="success",this.countdown=5,this.loginForm=this.fb.group({email:["",[A.required,A.email]],password:["",[A.required,A.minLength(6)]]})}get f(){return this.loginForm.controls}ngOnInit(){}hideToast(){this.isToastVisible=!1}showToast(e,i){this.toastMessage=e,this.toastType=i,this.isToastVisible=!0,setTimeout(()=>{this.hideToast()},5500)}togglePassword(){this.showPassword=!this.showPassword}updateCountdownMessage(){this.toastMessage=`Login successfully, you will be redirected to home page in ${this.countdown}s`}onSubmit(){if(this.submitted=!0,this.loginForm.invalid)return;let e={email:this.loginForm.get("email")?.value,password:this.loginForm.get("password")?.value};this.userService.login(e).subscribe({next:i=>{debugger;this.updateCountdownMessage(),this.showToast(this.toastMessage,"success");let r=setInterval(()=>{this.countdown--,this.updateCountdownMessage(),this.countdown===0&&(clearInterval(r),this.router.navigate(["/home"]).then(()=>{window.location.reload()}))},1e3)},complete:()=>{debugger;console.log("complete")},error:i=>{debugger;this.showToast("Login failed, please check your username and password","error"),console.log(i)}})}static{this.\u0275fac=function(i){return new(i||n)(y(Ge),y(pt),y(se))}}static{this.\u0275cmp=M({type:n,selectors:[["app-login"]],decls:36,vars:15,consts:[[1,"container-fluid","d-flex","flex-column","justify-content-center","align-items-center","content-container"],[1,"login-container"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Nh\u1EADp email c\u1EE7a b\u1EA1n",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password",1,"form-label"],[1,"password-container"],["id","password","formControlName","password","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u",1,"form-control",3,"type"],[1,"toggle-password","fa",3,"click","ngClass"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["href","#",1,"forgot-password"],["type","submit",1,"btn","btn-primary","w-100","mt-3"],[1,"register-text","mt-3"],["routerLink","/register",1,"register-link"],[1,"toast-container"],[1,"toast",3,"ngClass"],[1,"toast-content"],[1,"fa-solid",3,"ngClass"],[1,"toast-close-btn",3,"click"],[1,"fa-solid","fa-xmark"],[1,"text-danger"]],template:function(i,r){if(i&1&&(m(0,"app-login-header"),s(1,"div",0)(2,"div",1)(3,"h2"),l(4,"\u0110\u0103ng nh\u1EADp"),a(),s(5,"form",2),f("ngSubmit",function(){return r.onSubmit()}),s(6,"div",3)(7,"label",4),l(8,"Email"),a(),m(9,"input",5),w(10,Fo,2,0,"div",6),a(),s(11,"div",3)(12,"label",7),l(13,"M\u1EADt kh\u1EA9u"),a(),s(14,"div",8),m(15,"input",9),s(16,"i",10),f("click",function(){return r.togglePassword()}),a()(),w(17,No,2,1,"div",11),a(),s(18,"div",12)(19,"a",13),l(20,"Qu\xEAn m\u1EADt kh\u1EA9u"),a()(),s(21,"button",14),l(22," \u0110\u0103ng nh\u1EADp "),a()(),s(23,"p",15),l(24," Ch\u01B0a c\xF3 t\xE0i kho\u1EA3n? "),s(25,"a",16),l(26,"\u0110\u0103ng k\xFD"),a()()()(),s(27,"div",17)(28,"div",18)(29,"div",19),m(30,"i",20),s(31,"span"),l(32),a()(),s(33,"button",21),f("click",function(){return r.hideToast()}),m(34,"i",22),a()()(),m(35,"app-login-footer")),i&2){let o;u(5),_("formGroup",r.loginForm),u(5),_("ngIf",r.submitted&&((o=r.loginForm.get("email"))==null?null:o.errors)),u(5),_("type",r.showPassword?"text":"password"),u(),_("ngClass",r.showPassword?"fa-eye":"fa-eye-slash"),u(),_("ngIf",r.submitted&&r.f.password.errors),u(11),_("ngClass",q(8,Oo,r.isToastVisible,r.toastType==="success",r.toastType==="error")),u(2),_("ngClass",X(12,Vo,r.toastType==="success",r.toastType==="error")),u(2),b(r.toastMessage)}},dependencies:[$,W,ze,Q,ue,Be,xe,_e,ae,mt,ft],styles:[".content-container[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);display:flex;justify-content:center;align-items:center;background-color:#dfefff;padding:20px}.login-container[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:10px;box-shadow:0 4px 10px #0003;width:350px}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#1e3c72;font-weight:700;text-align:center}.form-control[_ngcontent-%COMP%]{border-radius:5px}.btn-primary[_ngcontent-%COMP%]{background-color:#1e3c72;border:none}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#163b68}.forgot-password[_ngcontent-%COMP%]{color:#1e3c72;text-decoration:none;font-size:14px}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.register-text[_ngcontent-%COMP%]{font-size:14px}.register-link[_ngcontent-%COMP%]{color:#1e3c72;font-weight:700;text-decoration:none}.register-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.text-danger[_ngcontent-%COMP%]{font-size:12px;margin-top:5px}.password-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;font-size:18px;color:#1e3c72;transition:color .3s ease}.form-control[_ngcontent-%COMP%]{padding-right:40px;height:40px;line-height:40px}.toggle-password[_ngcontent-%COMP%]:hover{color:#163b68}.toast-container[_ngcontent-%COMP%]{position:fixed;top:15px;right:15px;z-index:1050;display:flex;flex-direction:column;align-items:flex-end}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:6px;box-shadow:0 2px 4px #0003;transform:translate(100%);opacity:0;transition:transform .3s ease-out,opacity .3s ease-out;min-width:200px;max-width:280px;font-size:14px;gap:10px}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.hide[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.toast.success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.toast.error[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.toast[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toast[_ngcontent-%COMP%]   .toast-close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:16px;cursor:pointer;transition:color .3s ease;display:flex;align-items:center;justify-content:center}.toast[_ngcontent-%COMP%]   .toast-close-btn[_ngcontent-%COMP%]:hover{color:#f8d7da}.toast[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}"]})}}return n})();var Bo=(n,t,e)=>({show:n,success:t,error:e}),Lo=(n,t)=>({"fa-circle-check":n,"fa-triangle-exclamation":t});function Uo(n,t){n&1&&(s(0,"div",24),l(1," H\u1ECD v\xE0 t\xEAn ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 3 k\xFD t\u1EF1! "),a())}function jo(n,t){n&1&&(s(0,"div",24),l(1," Email kh\xF4ng h\u1EE3p l\u1EC7! "),a())}function zo(n,t){n&1&&(s(0,"div",24),l(1," M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1! "),a())}function Go(n,t){n&1&&(s(0,"div",24),l(1," Vui l\xF2ng nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u! "),a())}function Ho(n,t){n&1&&(s(0,"div",24),l(1," M\u1EADt kh\u1EA9u kh\xF4ng kh\u1EDBp! "),a())}var tr=(()=>{class n{constructor(e,i,r){this.fb=e,this.userService=i,this.router=r,this.submitted=!1,this.showPassword=!1,this.showRetypePassword=!1,this.toastMessage="",this.isToastVisible=!1,this.toastType="success",this.countdown=5,this.registerForm=this.fb.group({username:["",[A.required,A.minLength(3)]],email:["",[A.required,A.email]],password:["",[A.required,A.minLength(6)]],retypePassword:["",A.required]},{validator:this.matchPasswords})}get f(){return this.registerForm.controls}matchPasswords(e){let i=e.get("password")?.value,r=e.get("retypePassword")?.value;return i===r?null:{mismatch:!0}}ngOnInit(){}hideToast(){this.isToastVisible=!1}showToast(e,i){this.toastMessage=e,this.toastType=i,this.isToastVisible=!0,setTimeout(()=>{this.hideToast()},5500)}updateCountdownMessage(){this.toastMessage=`Register successfully, you will be redirected to login in ${this.countdown}s`}togglePassword(){this.showPassword=!this.showPassword}toggleRetypePassword(){this.showRetypePassword=!this.showRetypePassword}onRegister(){if(this.submitted=!0,this.registerForm.invalid)return;let e={email:this.registerForm.get("email")?.value,username:this.registerForm.get("username")?.value,password:this.registerForm.get("password")?.value,retype_password:this.registerForm.get("retypePassword")?.value};console.log(e),this.userService.register(e).subscribe({next:()=>{debugger;this.updateCountdownMessage(),this.showToast(this.toastMessage,"success");let i=setInterval(()=>{this.countdown--,this.updateCountdownMessage(),this.countdown===0&&(clearInterval(i),this.router.navigate(["/login"]))},1e3)},complete:()=>{debugger},error:i=>{debugger;this.showToast("Login failed, please check your username and password","error")}})}static{this.\u0275fac=function(i){return new(i||n)(y(Ge),y(pt),y(se))}}static{this.\u0275cmp=M({type:n,selectors:[["app-register"]],decls:46,vars:20,consts:[[1,"container-fluid","d-flex","flex-column","justify-content-center","align-items-center","content-container"],[1,"register-container"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","Nh\u1EADp h\u1ECD v\xE0 t\xEAn",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Nh\u1EADp email c\u1EE7a b\u1EA1n",1,"form-control"],["for","password",1,"form-label"],[1,"password-container"],["id","password","formControlName","password","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u",1,"form-control",3,"type"],[1,"toggle-password","fa",3,"click","ngClass"],["for","retypePassword",1,"form-label"],["id","retypePassword","formControlName","retypePassword","placeholder","Nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u",1,"form-control",3,"type"],["type","submit",1,"btn","btn-primary","w-100","mt-3"],[1,"login-text","mt-3"],["routerLink","/login",1,"login-link"],[1,"toast-container"],[1,"toast",3,"ngClass"],[1,"toast-content"],[1,"fa-solid",3,"ngClass"],[1,"toast-close-btn",3,"click"],[1,"fa-solid","fa-xmark"],[1,"text-danger"]],template:function(i,r){i&1&&(m(0,"app-login-header"),s(1,"div",0)(2,"div",1)(3,"h2"),l(4,"\u0110\u0103ng k\xFD"),a(),s(5,"form",2),f("ngSubmit",function(){return r.onRegister()}),s(6,"div",3)(7,"label",4),l(8,"H\u1ECD v\xE0 t\xEAn"),a(),m(9,"input",5),w(10,Uo,2,0,"div",6),a(),s(11,"div",3)(12,"label",7),l(13,"Email"),a(),m(14,"input",8),w(15,jo,2,0,"div",6),a(),s(16,"div",3)(17,"label",9),l(18,"M\u1EADt kh\u1EA9u"),a(),s(19,"div",10),m(20,"input",11),s(21,"i",12),f("click",function(){return r.togglePassword()}),a()(),w(22,zo,2,0,"div",6),a(),s(23,"div",3)(24,"label",13),l(25,"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u"),a(),s(26,"div",10),m(27,"input",14),s(28,"i",12),f("click",function(){return r.toggleRetypePassword()}),a()(),w(29,Go,2,0,"div",6)(30,Ho,2,0,"div",6),a(),s(31,"button",15),l(32," \u0110\u0103ng k\xFD "),a()(),s(33,"p",16),l(34," \u0110\xE3 c\xF3 t\xE0i kho\u1EA3n? "),s(35,"a",17),l(36,"\u0110\u0103ng nh\u1EADp"),a()()()(),s(37,"div",18)(38,"div",19)(39,"div",20),m(40,"i",21),s(41,"span"),l(42),a()(),s(43,"button",22),f("click",function(){return r.hideToast()}),m(44,"i",23),a()()(),m(45,"app-login-footer")),i&2&&(u(5),_("formGroup",r.registerForm),u(5),_("ngIf",r.submitted&&r.f.username.errors),u(5),_("ngIf",r.submitted&&r.f.email.errors),u(5),_("type",r.showPassword?"text":"password"),u(),_("ngClass",r.showPassword?"fa-eye":"fa-eye-slash"),u(),_("ngIf",r.submitted&&r.f.password.errors),u(5),_("type",r.showRetypePassword?"text":"password"),u(),_("ngClass",r.showRetypePassword?"fa-eye":"fa-eye-slash"),u(),_("ngIf",r.submitted&&r.f.retypePassword.errors),u(),_("ngIf",r.submitted&&(r.registerForm.errors==null?null:r.registerForm.errors.mismatch)),u(8),_("ngClass",q(13,Bo,r.isToastVisible,r.toastType==="success",r.toastType==="error")),u(2),_("ngClass",X(17,Lo,r.toastType==="success",r.toastType==="error")),u(2),b(r.toastMessage))},dependencies:[$,W,ze,Q,ue,Be,xe,_e,ae,mt,ft],styles:[".content-container[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);display:flex;justify-content:center;align-items:center;background-color:#dfefff;padding:20px}.register-container[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:10px;box-shadow:0 4px 10px #0003;width:350px}.register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#1e3c72;font-weight:700;text-align:center}.register-link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.form-control[_ngcontent-%COMP%]{border-radius:5px}.btn-primary[_ngcontent-%COMP%]{background-color:#1e3c72;border:none}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#163b68}.login-text[_ngcontent-%COMP%]{font-size:14px}.login-link[_ngcontent-%COMP%]{color:#1e3c72;font-weight:700;text-decoration:none}.login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.text-danger[_ngcontent-%COMP%]{font-size:12px;margin-top:5px}.password-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;font-size:18px;color:#1e3c72;transition:color .3s ease}.form-control[_ngcontent-%COMP%]{padding-right:40px;height:40px;line-height:40px}.toggle-password[_ngcontent-%COMP%]:hover{color:#163b68}"]})}}return n})();var ir=(()=>{class n{constructor(){this.audioContext=null,this.source=null,this.audioBuffer=null,this.startTime=0,this.pauseTime=0,this.isPlaying=!1,this.currentUrl="",this.audioContext=new(window.AudioContext||window.webkitAudioContext)}isNewSong(e){return this.currentUrl!==e}playAudio(e){return c(this,null,function*(){this.audioContext&&(this.isNewSong(e)&&(this.currentUrl=e,yield this.fetchAudio(e)),!this.isPlaying&&this.audioBuffer&&this.resumeAudio())})}fetchAudio(e){return c(this,null,function*(){try{let r=yield(yield fetch(e)).arrayBuffer();this.audioBuffer=yield this.audioContext.decodeAudioData(r),this.startTime=this.audioContext.currentTime,this.pauseTime=0,this.playBuffer()}catch(i){console.error("L\u1ED7i khi t\u1EA3i file:",i)}})}playBuffer(){!this.audioContext||!this.audioBuffer||(this.stopAudio(),this.source=this.audioContext.createBufferSource(),this.source.buffer=this.audioBuffer,this.source.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime-this.pauseTime,this.source.start(0,this.pauseTime),this.isPlaying=!0,this.source.onended=()=>{this.isPlaying=!1,this.pauseTime=0})}pauseAudio(){this.source&&this.isPlaying&&(this.source.stop(),this.pauseTime=this.audioContext.currentTime-this.startTime,this.isPlaying=!1)}stopAudio(){this.source&&(this.source.stop(),this.source=null,this.isPlaying=!1,this.pauseTime=0)}resumeAudio(){!this.isPlaying&&this.audioBuffer&&this.playBuffer()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qo=(n,t,e)=>({show:n,success:t,error:e}),$o=(n,t)=>({"fa-circle-check":n,"fa-triangle-exclamation":t});function Wo(n,t){if(n&1){let e=k();s(0,"li",16),f("click",function(){let r=h(e).$implicit,o=x();return g(o.selectPlaylist(r))}),m(1,"img",17),s(2,"div",18)(3,"h4"),l(4),a(),s(5,"p"),l(6),a()()()}if(n&2){let e=t.$implicit;u(4),b(e.name),u(2),oe("",e.songs.length," b\xE0i h\xE1t")}}function Yo(n,t){if(n&1){let e=k();s(0,"div",19)(1,"div",20),m(2,"i",21),s(3,"div")(4,"h5"),l(5),a(),s(6,"p"),l(7),a()()(),s(8,"div",22)(9,"button",16),f("click",function(){h(e);let r=x();return g(r.prevSong())}),m(10,"i",23),a(),s(11,"button",24),f("click",function(){h(e);let r=x();return g(r.isPlaying(r.currentPlayingSong)?r.stopSong(r.currentPlayingSong.id):r.playSong(r.currentPlayingSong))}),m(12,"i",25),a(),s(13,"button",16),f("click",function(){h(e);let r=x();return g(r.nextSong())}),m(14,"i",26),a(),s(15,"button",16),f("click",function(){h(e);let r=x();return g(r.closeMiniPlayer())}),m(16,"i",15),a()()()}if(n&2){let e=x();u(5),b(e.currentPlayingSong.title),u(2),b(e.currentPlayingSong.artist),u(5),I("fa-play",!e.isPlaying(e.currentPlayingSong))("fa-pause",e.isPlaying(e.currentPlayingSong))}}function Zo(n,t){if(n&1){let e=k();s(0,"button",58),f("click",function(){h(e);let r=x().$implicit,o=x(2);return g(o.playSong(r))}),m(1,"i",59),a()}}function Qo(n,t){if(n&1){let e=k();s(0,"button",58),f("click",function(){h(e);let r=x().$implicit,o=x(2);return g(o.stopSong(r.id))}),m(1,"i",60),a()}}function Ko(n,t){if(n&1&&(s(0,"span"),l(1),a()),n&2){let e=x().index;u(),b(e+1)}}function Jo(n,t){if(n&1){let e=k();s(0,"li")(1,"a",52),f("click",function(){let r=h(e).$implicit,o=x().$implicit,d=x(2);return g(d.moveToAnotherPlaylist(r,o))}),l(2),a()()}if(n&2){let e=t.$implicit;u(2),b(e.name)}}function es(n,t){if(n&1){let e=k();s(0,"tr",39),f("mouseenter",function(){let r=h(e).index,o=x(2);return g(o.hoveredIndex=r)})("mouseleave",function(){h(e);let r=x(2);return g(r.hoveredIndex=-1)})("dblclick",function(){let r=h(e).$implicit,o=x(2);return g(o.playSong(r))}),s(1,"td",40),w(2,Zo,2,0,"button",41)(3,Qo,2,0,"button",41)(4,Ko,2,1,"span",42),a(),s(5,"td"),l(6),a(),s(7,"td"),l(8),a(),s(9,"td"),l(10),a(),s(11,"td"),l(12),a(),s(13,"td"),l(14),a(),s(15,"td")(16,"div",43)(17,"div",44)(18,"button",45),f("click",function(){let r=h(e).$implicit,o=x(2);return g(o.toggleFavorite(r))}),m(19,"i",46),a(),s(20,"div",47)(21,"button",48),m(22,"i",49),a(),s(23,"ul",50),w(24,Jo,3,1,"li",51),s(25,"a",52),f("click",function(){let r=h(e).$implicit,o=x(2);return g(o.createPlaylistFromSong(r))}),m(26,"i",5),s(27,"span",53),l(28,"New playlist"),a()()()(),s(29,"button",54),f("click",function(){let r=h(e).$implicit,o=x(2);return g(o.removeFromPlaylist(o.selectedPlaylist,r))}),m(30,"i",55),a()(),s(31,"div",56)(32,"button",54),f("click",function(){let r=h(e).$implicit,o=x(2);return g(o.downloadSong(r))}),m(33,"i",57),a()()()()()}if(n&2){let e=t.$implicit,i=t.index,r=x(2);u(2),_("ngIf",r.hoveredIndex===i&&!r.chkPlaying(e.id)),u(),_("ngIf",r.hoveredIndex===i&&r.chkPlaying(e.id)),u(),_("ngIf",r.hoveredIndex!==i),u(2),b(e.title),u(2),b(e.artist),u(2),b(e.genre),u(2),b(e.album),u(2),b(e.duration),u(5),I("favorited",e.is_favorite),u(5),_("ngForOf",r.playlists)}}function ts(n,t){if(n&1){let e=k();s(0,"div",27)(1,"div",28)(2,"h2",3),l(3),a(),s(4,"i",29),f("click",function(){h(e);let r=x();return g(r.openEditModal())}),a()(),s(5,"div",30),f("click",function(){h(e);let r=x();return g(r.closeEditModal())}),s(6,"div",31),f("click",function(r){return h(e),g(r.stopPropagation())}),s(7,"h2"),l(8,"Edit Playlist Name"),a(),s(9,"input",32),Kt("ngModelChange",function(r){h(e);let o=x();return Qt(o.selectedPlaylist.name,r)||(o.selectedPlaylist.name=r),g(r)}),a(),s(10,"div",33)(11,"button",34),f("click",function(){h(e);let r=x();return g(r.closeEditModal())}),l(12," Cancel "),a(),s(13,"button",35),f("click",function(){h(e);let r=x();return g(r.savePlaylistName(r.selectedPlaylist))}),l(14," Save "),a()()()(),s(15,"p",36),l(16),a(),s(17,"table",37)(18,"thead")(19,"tr")(20,"th"),l(21,"#"),a(),s(22,"th"),l(23,"Title"),a(),s(24,"th"),l(25,"Artist"),a(),s(26,"th"),l(27,"Genre"),a(),s(28,"th"),l(29,"Album"),a(),s(30,"th"),l(31,"Duration"),a(),s(32,"th"),l(33,"Features"),a()()(),s(34,"tbody"),w(35,es,34,11,"tr",38),a()()()}if(n&2){let e=x();u(3),oe("\u{1F3B6} ",e.selectedPlaylist.name,""),u(2),I("show-modal",e.isEditModalOpen),u(4),Zt("ngModel",e.selectedPlaylist.name),u(7),oe(" ",e.selectedPlaylist.songs.length," b\xE0i h\xE1t "),u(19),_("ngForOf",e.selectedPlaylist.songs)}}var nr=(()=>{class n{constructor(e,i,r,o){this.playlistService=e,this.audioService=i,this.fileService=r,this.songService=o,this.playlists=[],this.selectedPlaylist=null,this.isEditing=!1,this.editablePlaylistName="",this.isEditModalOpen=!1,this.toastMessage="",this.isToastVisible=!1,this.toastType="success",this.currentPlayingSong=null,this.currentPlay=new Map,this.hoveredIndex=-1}ngOnInit(){debugger;let e=3;this.playlistService.currentPlaylist.subscribe(i=>{if(i){debugger;e=1,this.playlistService.currentSong.subscribe(r=>{r&&this.playlistService.addSongToPlaylist(i.id,r.id).subscribe({next:o=>{debugger;console.log(o),i.songs.push(r),this.selectedPlaylist=i,this.showToast("Song added to playlist successfully","success",3e3)},complete:()=>{debugger;console.log("Song added to playlist successfully")},error:o=>{debugger;console.error(o),this.showToast("Error adding song to playlist","error",3e3)}})})}else this.playlistService.currentSong.subscribe(r=>{if(r){debugger;let o={name:r.title},d=-1;this.playlistService.createPlaylist(o).subscribe({next:p=>{debugger;console.log(p);let C={id:p.id,name:p.name,songs:[]};d=C.id,C.songs.push(r),this.selectedPlaylist=C,this.playlists.push(C),this.showToast("Playlist created successfully","success",3e3)},complete:()=>{debugger;console.log("Playlist created successfully"),d!==-1&&this.playlistService.addSongToPlaylist(d,r.id).subscribe({next:p=>{debugger;console.log(p)},complete:()=>{debugger;console.log("Song added to playlist successfully")},error:p=>{debugger;console.error(p),this.showToast("Error adding song to playlist","error",3e3)}})},error:p=>{debugger;console.error(p),this.showToast("Error creating playlist","error",3e3)}})}})}),e==3&&this.playlistService.getAllPlaylists().subscribe({next:i=>{this.playlists=i,this.selectedPlaylist=this.playlists[0]},complete:()=>{console.log("Playlists loaded successfully")},error:i=>{console.error(i)}})}ngAfterViewInit(){}closeEditModal(){this.isEditModalOpen=!1}hideToast(){this.isToastVisible=!1}showToast(e,i,r){this.toastMessage=e,this.toastType=i,this.isToastVisible=!0,setTimeout(()=>{this.hideToast()},r)}selectPlaylist(e){this.selectedPlaylist=e,this.isEditing=!1}openEditModal(){this.isEditModalOpen=!0,this.selectedPlaylist&&(this.isEditing=!0,this.editablePlaylistName=this.selectedPlaylist.name)}savePlaylistName(e){debugger;if(this.selectedPlaylist){let i={name:this.selectedPlaylist.name};this.isEditing=!1,this.playlistService.updatePlaylist(e.id,i).subscribe({next:r=>{let o={id:r.id,name:r.name,songs:r.songs},d=this.playlists.findIndex(p=>p.id===o.id);this.playlists[d]=o,this.closeEditModal(),this.showToast("Playlist rename successfully","success",3e3)},complete:()=>{console.log("Playlist updated successfully")},error:r=>{console.error(r),this.showToast("Error renaming playlist","error",3e3)}})}}cancelEditing(){this.isEditing=!1}playSong(e){debugger;console.log(e),this.currentPlay.set(e.id,!0),this.currentPlayingSong=e,this.audioService.playAudio(this.fileService.getFile(e.file_name))}stopSong(e){debugger;this.currentPlay.set(e,!1),this.audioService.pauseAudio()}removeFromPlaylist(e,i){debugger;this.playlistService.removeSongFromPlaylist(e.id,i.id).subscribe({next:r=>{debugger;console.log(r);let o=e.songs.findIndex(d=>d.id===i.id);e.songs.splice(o,1),this.showToast("Song removed from playlist","success",3e3)},complete:()=>{debugger;console.log("Song removed from playlist successfully")},error:r=>{console.error(r),this.showToast("Error removing song from playlist","error",3e3)}})}createPlaylist(){debugger;let e={name:`New Playlist #${this.playlists.length+1}`};this.playlistService.createPlaylist(e).subscribe({next:i=>{debugger;console.log(i);let r={id:i.id,name:i.name,songs:[]};this.selectedPlaylist=r,this.playlists.push(r),this.showToast("Playlist created successfully","success",3e3)},complete:()=>{debugger;console.log("Playlist created successfully")},error:i=>{console.error(i),this.showToast("Error creating playlist","error",3e3)}})}prevSong(){}togglePlayPause(e){console.log(e),this.audioService.playAudio(this.fileService.getFile(e.file_name))}nextSong(){}chkPlaying(e){return this.currentPlay.get(e)}isPlaying(e){return e==null?!1:this.currentPlay.get(e.id)==!0}moveToAnotherPlaylist(e,i){}closeMiniPlayer(){this.currentPlayingSong=null,this.audioService.stopAudio()}downloadSong(e){this.fileService.downloadSong(e).subscribe({next:i=>{debugger;let r=window.URL.createObjectURL(i),o=document.createElement("a");o.style.display="none",o.href=r,o.download=e.file_name,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(r)},complete:()=>{debugger;console.log("complete"),this.showToast("Download successfully, enjoy the music","success",4e3)},error:i=>{debugger;console.log(i),this.showToast("Download failed","error",4e3)}})}createPlaylistFromSong(e){}toggleFavorite(e){debugger;e.is_favorite=!e.is_favorite;let i={title:e.title,artist:e.artist,album:e.album,genre:e.genre,duration:e.duration,file_name:e.file_name,is_favorite:e.is_favorite};this.songService.updateSongById(e.id,i).subscribe({next:r=>{debugger;console.log(r)},complete:()=>{debugger;e.is_favorite?this.showToast("Song was added to favorite","success",2e3):this.showToast("Song was removed from favorite","success",2e3)},error:r=>{debugger;console.log(r)}})}static{this.\u0275fac=function(i){return new(i||n)(y(lt),y(ir),y(at),y(He))}}static{this.\u0275cmp=M({type:n,selectors:[["app-playlist"]],decls:22,vars:13,consts:[[1,"container-fluid","playlist-container"],[1,"row"],[1,"col-md-4","playlist-list"],[1,"section-title"],[1,"btn","btn-primary","create-playlist-btn",3,"click"],[1,"fa-solid","fa-plus"],[1,"playlist-items"],[3,"click",4,"ngFor","ngForOf"],["class","mini-player",4,"ngIf"],["class","col-md-8 playlist-details",4,"ngIf"],[1,"toast-container"],[1,"toast",3,"ngClass"],[1,"toast-content"],[1,"fa-solid",3,"ngClass"],[1,"toast-close-btn",3,"click"],[1,"fa-solid","fa-xmark"],[3,"click"],["src","../../../assets/playlist_cover.png","alt","Playlist Cover"],[1,"playlist-info"],[1,"mini-player"],[1,"mini-player-info"],[1,"fa-solid","fa-music"],[1,"mini-player-controls"],[1,"fa-solid","fa-backward-step"],[2,"width","24px","text-align","center",3,"click"],[1,"fa-solid"],[1,"fa-solid","fa-forward-step"],[1,"col-md-8","playlist-details"],[1,"playlist-name"],[1,"fa-solid","fa-pen","edit-icon",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],["type","text",1,"edit-input",3,"ngModelChange","ngModel"],[1,"modal-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[1,"playlist-meta"],[1,"table"],[3,"mouseenter","mouseleave","dblclick",4,"ngFor","ngForOf"],[3,"mouseenter","mouseleave","dblclick"],[1,"play-cell"],["class","play-btn",3,"click",4,"ngIf"],[4,"ngIf"],[1,"action-group","d-flex","justify-content-between"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fav-btn",3,"click"],[1,"fa-solid","fa-heart"],[1,"btn-group","dropstart"],["type","button","data-bs-toggle","dropdown",1,"action-btn","dropdown-toggle"],[1,"fa-solid","fa-list-ul"],["data-bs-popper","static",1,"dropdown-menu","dropdown-menu-end"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],[2,"margin-left","5px"],[1,"action-btn",3,"click"],[1,"fa-solid","fa-trash"],[1,""],[1,"fa-solid","fa-download"],[1,"play-btn",3,"click"],[1,"fa-solid","fa-play"],[1,"fa-solid","fa-pause"]],template:function(i,r){i&1&&(m(0,"app-home-header"),s(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2",3),l(5,"\u{1F3B5} My Playlist"),a(),s(6,"button",4),f("click",function(){return r.createPlaylist()}),m(7,"i",5),l(8," Create Playlist "),a(),s(9,"ul",6),w(10,Wo,7,2,"li",7),a()(),w(11,Yo,17,6,"div",8)(12,ts,36,6,"div",9),a()(),s(13,"div",10)(14,"div",11)(15,"div",12),m(16,"i",13),s(17,"span"),l(18),a()(),s(19,"button",14),f("click",function(){return r.hideToast()}),m(20,"i",15),a()()(),m(21,"app-home-footer")),i&2&&(u(10),_("ngForOf",r.playlists),u(),_("ngIf",r.currentPlayingSong),u(),_("ngIf",r.selectedPlaylist),u(2),_("ngClass",q(6,qo,r.isToastVisible,r.toastType==="success",r.toastType==="error")),u(2),_("ngClass",X(10,$o,r.toastType==="success",r.toastType==="error")),u(2),b(r.toastMessage))},dependencies:[$,Ee,W,Q,ue,Nt,ct,dt],styles:[".playlist-container[_ngcontent-%COMP%]{background-color:#dfefff;padding:20px;min-height:calc(100vh - 120px)}.section-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:15px}.create-playlist-btn[_ngcontent-%COMP%]{background-color:#1e3c72;color:#fff;padding:10px 15px;font-size:16px;font-weight:700;border-radius:25px;display:flex;align-items:center;gap:10px;cursor:pointer;transition:background-color .3s ease,transform .2s ease;margin-bottom:15px}.create-playlist-btn[_ngcontent-%COMP%]:hover{background-color:#163b68;transform:scale(1.05)}.playlist-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.playlist-items[_ngcontent-%COMP%]{list-style:none;padding:0}.playlist-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:10px;background:#fff;border-radius:10px;margin-bottom:10px;cursor:pointer;transition:background .3s ease,transform .2s ease}.playlist-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e3f2fd;transform:scale(1.02)}.playlist-items[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:5px}.playlist-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700}.playlist-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}.playlist-details[_ngcontent-%COMP%]{margin-top:105px;background:#fff;padding:20px;border-radius:10px;min-height:calc(100vh - 300px)}.playlist-meta[_ngcontent-%COMP%]{font-size:14px;color:#555;margin-bottom:10px}.table[_ngcontent-%COMP%]{background:#fff;border-radius:10px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#1e3c72;color:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.action-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;transition:color .3s ease}.action-btn[_ngcontent-%COMP%]:hover{color:#1e3c72}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s ease-in-out,visibility .3s ease-in-out}.modal-content[_ngcontent-%COMP%]{background:#dfefff;color:#1e3c72;padding:20px;border-radius:10px;width:400px;text-align:center;box-shadow:0 4px 8px #0003;transform:scale(.95);transition:transform .3s ease-in-out}.modal-overlay.show-modal[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-overlay.show-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{transform:scale(1)}.edit-input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-top:10px;border:1px solid #1e3c72;border-radius:5px;font-size:16px;color:#1e3c72;background:#fff;outline:none;transition:border .3s ease}.edit-input[_ngcontent-%COMP%]:focus{border:2px solid #1e3c72}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px}.btn-secondary[_ngcontent-%COMP%]{background:transparent;color:#1e3c72;border:1px solid #1e3c72;padding:8px 15px;font-size:14px;border-radius:10px;cursor:pointer;transition:background .3s ease,color .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#1e3c72;color:#fff}.btn-primary[_ngcontent-%COMP%]{background:#1e3c72;color:#fff;padding:8px 15px;font-size:14px;border-radius:10px;border:none;cursor:pointer;transition:background .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#163b68}.edit-icon[_ngcontent-%COMP%]{cursor:pointer;color:#1e3c72;margin-left:10px;font-size:18px;transition:color .3s;margin-bottom:15px}.edit-icon[_ngcontent-%COMP%]:hover{color:#1e3c72}.toast-container[_ngcontent-%COMP%]{position:fixed;top:15px;right:15px;z-index:1050;display:flex;flex-direction:column;align-items:flex-end}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:6px;box-shadow:0 2px 4px #0003;transform:translate(100%);opacity:0;transition:transform .3s ease-out,opacity .3s ease-out;min-width:200px;max-width:280px;font-size:14px;gap:10px}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.hide[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.toast.success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.toast.error[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.toast[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toast[_ngcontent-%COMP%]   .toast-close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:16px;cursor:pointer;transition:color .3s ease;display:flex;align-items:center;justify-content:center}.toast[_ngcontent-%COMP%]   .toast-close-btn[_ngcontent-%COMP%]:hover{color:#f8d7da}.toast[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.mini-player[_ngcontent-%COMP%]{position:absolute;top:110px;left:824px;transform:translate(-50%);width:400px;background:#1e3c72;color:#fff;padding:10px 15px;display:flex;justify-content:space-between;align-items:center;border-radius:10px;box-shadow:0 4px 10px #0003;z-index:1000}.mini-player-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.mini-player-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.mini-player-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:16px}.mini-player-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#ddd}.mini-player-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.mini-player-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:18px;cursor:pointer;transition:color .3s ease}.mini-player-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fc0}.play-cell[_ngcontent-%COMP%]{width:40px;text-align:center}.play-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:16px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#1e3c72;transition:color .3s ease}.play-btn[_ngcontent-%COMP%]:hover{color:#163b68}tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#c7d4dd!important;cursor:pointer}.fav-btn[_ngcontent-%COMP%]:focus, .fav-btn[_ngcontent-%COMP%]:active{background:none!important;outline:none!important;box-shadow:none!important}.fav-btn[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:#bbb;font-size:18px;transition:color .3s ease}.fav-btn[_ngcontent-%COMP%]   .fa-heart.favorited[_ngcontent-%COMP%]{color:#1e3c72}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.action-group[_ngcontent-%COMP%]{gap:10px}.fav-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;transition:color .3s ease}.action-btn[_ngcontent-%COMP%]:hover, .fav-btn[_ngcontent-%COMP%]:hover{color:#1e3c72}"]})}}return n})();var is=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"home",component:Gt},{path:"login",component:er},{path:"register",component:tr},{path:"favorite",component:Gt},{path:"playlist",component:nr}],rr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=R({imports:[Ct.forRoot(is),Ct]})}}return n})();var ht=(()=>{class n{constructor(){this.title="MusicWebApp_Angular"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){i&1&&m(0,"router-outlet")},dependencies:[ci]})}}return n})();var or=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=N({type:n,bootstrap:[ht]})}static{this.\u0275inj=R({providers:[si()],imports:[oi,nn,rr,ri,tn]})}}return n})();var ns=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=N({type:n,bootstrap:[ht]})}static{this.\u0275inj=R({imports:[or,ai]})}}return n})();export{hn as a,ns as b};
